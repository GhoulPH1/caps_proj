import{a as Nn,b as Bd,c as Ud,d as kd,e as Id,f as _d,g as Nd,h as Od}from"./chunk-K5YOUKA3.js";import{a as $s,b as S,c as D,d as I,e as E,f as V}from"./chunk-PJRSMLCV.js";function zs(e,t,r){t=t||[],r=r||0;for(var n=r;e>=Md;)t[r++]=e&255|Fs,e/=128;for(;e&zd;)t[r++]=e&255|Fs,e>>>=7;return t[r]=e|0,zs.bytes=r-n+1,t}function On(e,n){var r=0,n=n||0,o=0,s=n,i,a=e.length;do{if(s>=a)throw On.bytes=0,new RangeError("Could not decode varint");i=e[s++],r+=o<28?(i&js)<<o:(i&js)*Math.pow(2,o),o+=7}while(i>=Hd);return On.bytes=s-n,r}var Fd,Fs,jd,zd,Md,qd,Hd,js,Vd,Gd,Wd,Jd,Kd,Xd,Qd,Zd,Yd,em,tm,rm,$t,Ms=S(()=>{Fd=zs,Fs=128,jd=127,zd=~jd,Md=Math.pow(2,31);qd=On,Hd=128,js=127;Vd=Math.pow(2,7),Gd=Math.pow(2,14),Wd=Math.pow(2,21),Jd=Math.pow(2,28),Kd=Math.pow(2,35),Xd=Math.pow(2,42),Qd=Math.pow(2,49),Zd=Math.pow(2,56),Yd=Math.pow(2,63),em=function(e){return e<Vd?1:e<Gd?2:e<Wd?3:e<Jd?4:e<Kd?5:e<Xd?6:e<Qd?7:e<Zd?8:e<Yd?9:10},tm={encode:Fd,decode:qd,encodingLength:em},rm=tm,$t=rm});var Ft,ut,ft,Dr=S(()=>{Ms();Ft=(e,t=0)=>[$t.decode(e,t),$t.decode.bytes],ut=(e,t,r=0)=>($t.encode(e,t,r),t),ft=e=>$t.encodingLength(e)});var bb,qs,we,Hs,Vs,Le=S(()=>{bb=new Uint8Array(0),qs=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},we=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},Hs=e=>new TextEncoder().encode(e),Vs=e=>new TextDecoder().decode(e)});var Xe={};I(Xe,{Digest:()=>Ke,create:()=>$e,decode:()=>Rn,equals:()=>Ln});var $e,Rn,Ln,Ke,lt=S(()=>{Le();Dr();$e=(e,t)=>{let r=t.byteLength,n=ft(e),o=n+ft(r),s=new Uint8Array(o+r);return ut(e,s,0),ut(r,s,n),s.set(t,o),new Ke(e,r,t,s)},Rn=e=>{let t=we(e),[r,n]=Ft(t),[o,s]=Ft(t.subarray(n)),i=t.subarray(n+s);if(i.byteLength!==o)throw new Error("Incorrect length");return new Ke(r,o,i,t)},Ln=(e,t)=>e===t?!0:e.code===t.code&&e.size===t.size&&qs(e.bytes,t.bytes),Ke=class{constructor(t,r,n,o){this.code=t,this.size=r,this.digest=n,this.bytes=o}}});function nm(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<e.length;o++){var s=e.charAt(o),i=s.charCodeAt(0);if(r[i]!==255)throw new TypeError(s+" is ambiguous");r[i]=o}var a=e.length,l=e.charAt(0),h=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function y(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var k=0,_=0,z=0,K=v.length;z!==K&&v[z]===0;)z++,k++;for(var ce=(K-z)*d+1>>>0,H=new Uint8Array(ce);z!==K;){for(var ge=v[z],ue=0,ee=ce-1;(ge!==0||ue<_)&&ee!==-1;ee--,ue++)ge+=256*H[ee]>>>0,H[ee]=ge%a>>>0,ge=ge/a>>>0;if(ge!==0)throw new Error("Non-zero carry");_=ue,z++}for(var fe=ce-_;fe!==ce&&H[fe]===0;)fe++;for(var ct=l.repeat(k);fe<ce;++fe)ct+=e.charAt(H[fe]);return ct}function P(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var k=0;if(v[k]!==" "){for(var _=0,z=0;v[k]===l;)_++,k++;for(var K=(v.length-k)*h+1>>>0,ce=new Uint8Array(K);v[k];){var H=r[v.charCodeAt(k)];if(H===255)return;for(var ge=0,ue=K-1;(H!==0||ge<z)&&ue!==-1;ue--,ge++)H+=a*ce[ue]>>>0,ce[ue]=H%256>>>0,H=H/256>>>0;if(H!==0)throw new Error("Non-zero carry");z=ge,k++}if(v[k]!==" "){for(var ee=K-z;ee!==K&&ce[ee]===0;)ee++;for(var fe=new Uint8Array(_+(K-ee)),ct=_;ee!==K;)fe[ct++]=ce[ee++];return fe}}}function N(v){var k=P(v);if(k)return k;throw new Error(`Non-${t} character`)}return{encode:y,decodeUnsafe:P,decode:N}}var om,sm,Ws,Js=S(()=>{om=nm,sm=om,Ws=sm});var $n,Fn,jn,Ks,zn,pt,Fe,im,am,O,be=S(()=>{Js();Le();$n=class{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},Fn=class{constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Ks(this,t)}},jn=class{constructor(t){this.decoders=t}or(t){return Ks(this,t)}decode(t){let r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Ks=(e,t)=>new jn({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}}),zn=class{constructor(t,r,n,o){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new $n(t,r,n),this.decoder=new Fn(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}},pt=({name:e,prefix:t,encode:r,decode:n})=>new zn(e,t,r,n),Fe=({prefix:e,name:t,alphabet:r})=>{let{encode:n,decode:o}=Ws(r,t);return pt({prefix:e,name:t,encode:n,decode:s=>we(o(s))})},im=(e,t,r,n)=>{let o={};for(let d=0;d<t.length;++d)o[t[d]]=d;let s=e.length;for(;e[s-1]==="=";)--s;let i=new Uint8Array(s*r/8|0),a=0,l=0,h=0;for(let d=0;d<s;++d){let y=o[e[d]];if(y===void 0)throw new SyntaxError(`Non-${n} character`);l=l<<r|y,a+=r,a>=8&&(a-=8,i[h++]=255&l>>a)}if(a>=r||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return i},am=(e,t,r)=>{let n=t[t.length-1]==="=",o=(1<<r)-1,s="",i=0,a=0;for(let l=0;l<e.length;++l)for(a=a<<8|e[l],i+=8;i>r;)i-=r,s+=t[o&a>>i];if(i&&(s+=t[o&a<<r-i]),n)for(;s.length*r&7;)s+="=";return s},O=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>pt({prefix:t,name:e,encode(o){return am(o,n,r)},decode(o){return im(o,n,r,e)}})});var jt={};I(jt,{base58btc:()=>Pe,base58flickr:()=>cm});var Pe,cm,zt=S(()=>{be();Pe=Fe({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),cm=Fe({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var Er={};I(Er,{base32:()=>dt,base32hex:()=>pm,base32hexpad:()=>mm,base32hexpadupper:()=>hm,base32hexupper:()=>dm,base32pad:()=>fm,base32padupper:()=>lm,base32upper:()=>um,base32z:()=>ym});var dt,um,fm,lm,pm,dm,mm,hm,ym,xr=S(()=>{be();dt=O({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),um=O({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),fm=O({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),lm=O({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),pm=O({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),dm=O({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),mm=O({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),hm=O({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ym=O({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var Tr={};I(Tr,{CID:()=>m});var m,gm,wm,bm,Mt,Dm,Xs,Qs,Sr,Cr,Em,xm,Sm,C=S(()=>{Dr();lt();zt();xr();Le();m=class e{constructor(t,r,n,o){this.code=r,this.version=t,this.multihash=n,this.bytes=o,this.byteOffset=o.byteOffset,this.byteLength=o.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Cr,byteLength:Cr,code:Sr,version:Sr,multihash:Sr,bytes:Sr,_baseCache:Cr,asCID:Cr})}toV0(){switch(this.version){case 0:return this;default:{let{code:t,multihash:r}=this;if(t!==Mt)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Dm)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return e.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:t,digest:r}=this.multihash,n=$e(t,r);return e.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(t){return t&&this.code===t.code&&this.version===t.version&&Ln(this.multihash,t.multihash)}toString(t){let{bytes:r,version:n,_baseCache:o}=this;switch(n){case 0:return wm(r,o,t||Pe.encoder);default:return bm(r,o,t||dt.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(t){return xm(/^0\.0/,Sm),!!(t&&(t[Qs]||t.asCID===t))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(t){if(t instanceof e)return t;if(t!=null&&t.asCID===t){let{version:r,code:n,multihash:o,bytes:s}=t;return new e(r,n,o,s||Xs(r,n,o.bytes))}else if(t!=null&&t[Qs]===!0){let{version:r,multihash:n,code:o}=t,s=Rn(n);return e.create(r,o,s)}else return null}static create(t,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(t){case 0:{if(r!==Mt)throw new Error(`Version 0 CID must use dag-pb (code: ${Mt}) block encoding`);return new e(t,r,n,n.bytes)}case 1:{let o=Xs(t,r,n.bytes);return new e(t,r,n,o)}default:throw new Error("Invalid version")}}static createV0(t){return e.create(0,Mt,t)}static createV1(t,r){return e.create(1,t,r)}static decode(t){let[r,n]=e.decodeFirst(t);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(t){let r=e.inspectBytes(t),n=r.size-r.multihashSize,o=we(t.subarray(n,n+r.multihashSize));if(o.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=o.subarray(r.multihashSize-r.digestSize),i=new Ke(r.multihashCode,r.digestSize,s,o);return[r.version===0?e.createV0(i):e.createV1(r.codec,i),t.subarray(r.size)]}static inspectBytes(t){let r=0,n=()=>{let[y,P]=Ft(t.subarray(r));return r+=P,y},o=n(),s=Mt;if(o===18?(o=0,r=0):o===1&&(s=n()),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);let i=r,a=n(),l=n(),h=r+l,d=h-i;return{version:o,codec:s,multihashCode:a,digestSize:l,multihashSize:d,size:h}}static parse(t,r){let[n,o]=gm(t,r),s=e.decode(o);return s._baseCache.set(n,t),s}},gm=(e,t)=>{switch(e[0]){case"Q":{let r=t||Pe;return[Pe.prefix,r.decode(`${Pe.prefix}${e}`)]}case Pe.prefix:{let r=t||Pe;return[Pe.prefix,r.decode(e)]}case dt.prefix:{let r=t||dt;return[dt.prefix,r.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}},wm=(e,t,r)=>{let{prefix:n}=r;if(n!==Pe.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let o=t.get(n);if(o==null){let s=r.encode(e).slice(1);return t.set(n,s),s}else return o},bm=(e,t,r)=>{let{prefix:n}=r,o=t.get(n);if(o==null){let s=r.encode(e);return t.set(n,s),s}else return o},Mt=112,Dm=18,Xs=(e,t,r)=>{let n=ft(e),o=n+ft(t),s=new Uint8Array(o+r.byteLength);return ut(e,s,0),ut(t,s,n),s.set(r,o),s},Qs=Symbol.for("@ipld/js-cid/CID"),Sr={writable:!1,configurable:!1,enumerable:!0},Cr={writable:!1,enumerable:!1,configurable:!1},Em="0.0.0-dev",xm=(e,t)=>{if(e.test(Em))console.warn(t);else throw new Error(t)},Sm=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});function ci(e){if(e===null)return"null";if(e===void 0)return"undefined";if(e===!0||e===!1)return"boolean";let t=typeof e;if($m.includes(t))return t;if(t==="function")return"Function";if(Array.isArray(e))return"Array";if(jm(e))return"Buffer";let r=zm(e);return r||"Object"}function jm(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function zm(e){let t=Object.prototype.toString.call(e).slice(8,-1);if(Fm.includes(t))return t}var $m,Fm,ui=S(()=>{$m=["string","number","bigint","symbol"],Fm=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"]});var f,p,X=S(()=>{f=class{constructor(t,r,n){this.major=t,this.majorEncoded=t<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}};f.uint=new f(0,"uint",!0);f.negint=new f(1,"negint",!0);f.bytes=new f(2,"bytes",!0);f.string=new f(3,"string",!0);f.array=new f(4,"array",!1);f.map=new f(5,"map",!1);f.tag=new f(6,"tag",!1);f.float=new f(7,"float",!0);f.false=new f(7,"false",!0);f.true=new f(7,"true",!0);f.null=new f(7,"null",!0);f.undefined=new f(7,"undefined",!0);f.break=new f(7,"break",!0);p=class{constructor(t,r,n){this.type=t,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}});function Ar(e){return ht&&globalThis.Buffer.isBuffer(e)}function Ht(e){return e instanceof Uint8Array?Ar(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}function yi(e,t){if(Ar(e)&&Ar(t))return e.compare(t);for(let r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0}function fi(e,t=1/0){let r,n=e.length,o=null,s=[];for(let i=0;i<n;++i){if(r=e.charCodeAt(i),r>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}else if(i+1===n){(t-=3)>-1&&s.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),o=r;continue}r=(o-55296<<10|r-56320)+65536}else o&&(t-=3)>-1&&s.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function li(e,t,r){let n=[];for(;t<r;){let o=e[t],s=null,i=o>239?4:o>223?3:o>191?2:1;if(t+i<=r){let a,l,h,d;switch(i){case 1:o<128&&(s=o);break;case 2:a=e[t+1],(a&192)===128&&(d=(o&31)<<6|a&63,d>127&&(s=d));break;case 3:a=e[t+1],l=e[t+2],(a&192)===128&&(l&192)===128&&(d=(o&15)<<12|(a&63)<<6|l&63,d>2047&&(d<55296||d>57343)&&(s=d));break;case 4:a=e[t+1],l=e[t+2],h=e[t+3],(a&192)===128&&(l&192)===128&&(h&192)===128&&(d=(o&15)<<18|(a&63)<<12|(l&63)<<6|h&63,d>65535&&d<1114112&&(s=d))}}s===null?(s=65533,i=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),t+=i}return Wn(n)}function Wn(e){let t=e.length;if(t<=pi)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=pi));return r}var ht,Mm,qm,di,vr,Ae,yt,mi,hi,pi,je=S(()=>{ht=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",Mm=new TextDecoder,qm=new TextEncoder;di=ht?(e,t,r)=>r-t>64?globalThis.Buffer.from(e.subarray(t,r)).toString("utf8"):li(e,t,r):(e,t,r)=>r-t>64?Mm.decode(e.subarray(t,r)):li(e,t,r),vr=ht?e=>e.length>64?globalThis.Buffer.from(e):fi(e):e=>e.length>64?qm.encode(e):fi(e),Ae=e=>Uint8Array.from(e),yt=ht?(e,t,r)=>Ar(e)?new Uint8Array(e.subarray(t,r)):e.slice(t,r):(e,t,r)=>e.slice(t,r),mi=ht?(e,t)=>(e=e.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),Ht(globalThis.Buffer.concat(e,t))):(e,t)=>{let r=new Uint8Array(t),n=0;for(let o of e)n+o.length>r.length&&(o=o.subarray(0,r.length-n)),r.set(o,n),n+=o.length;return r},hi=ht?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);pi=4096});var Hm,Vt,gi=S(()=>{je();Hm=256,Vt=class{constructor(t=Hm){this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(t){let r=this.chunks[this.chunks.length-1];if(this.cursor+t.length<=this.maxCursor+1){let o=r.length-(this.maxCursor-this.cursor)-1;r.set(t,o)}else{if(r){let o=r.length-(this.maxCursor-this.cursor)-1;o<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,o),this.maxCursor=this.cursor-1)}t.length<64&&t.length<this.chunkSize?(r=hi(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(t,0)):(this.chunks.push(t),this.maxCursor+=t.length)}this.cursor+=t.length}toBytes(t=!1){let r;if(this.chunks.length===1){let n=this.chunks[0];t&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=yt(n,0,this.cursor)}else r=mi(this.chunks,this.cursor);return t&&this.reset(),r}}});function _e(e,t,r){if(e.length-t<r)throw new Error(`${w} not enough data for type`)}var w,Ie,Gt,te=S(()=>{w="CBOR decode error:",Ie="CBOR encode error:",Gt=[];Gt[23]=1;Gt[24]=2;Gt[25]=3;Gt[26]=5;Gt[27]=9});function re(e,t,r){_e(e,t,1);let n=e[t];if(r.strict===!0&&n<M[0])throw new Error(`${w} integer encoded in more bytes than necessary (strict decode)`);return n}function ne(e,t,r){_e(e,t,2);let n=e[t]<<8|e[t+1];if(r.strict===!0&&n<M[1])throw new Error(`${w} integer encoded in more bytes than necessary (strict decode)`);return n}function oe(e,t,r){_e(e,t,4);let n=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(r.strict===!0&&n<M[2])throw new Error(`${w} integer encoded in more bytes than necessary (strict decode)`);return n}function se(e,t,r){_e(e,t,8);let n=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],o=e[t+4]*16777216+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],s=(BigInt(n)<<BigInt(32))+BigInt(o);if(r.strict===!0&&s<M[3])throw new Error(`${w} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(r.allowBigInt===!0)return s;throw new Error(`${w} integers outside of the safe integer range are not supported`)}function wi(e,t,r,n){return new p(f.uint,re(e,t+1,n),2)}function bi(e,t,r,n){return new p(f.uint,ne(e,t+1,n),3)}function Di(e,t,r,n){return new p(f.uint,oe(e,t+1,n),5)}function Ei(e,t,r,n){return new p(f.uint,se(e,t+1,n),9)}function le(e,t){return G(e,0,t.value)}function G(e,t,r){if(r<M[0]){let n=Number(r);e.push([t|n])}else if(r<M[1]){let n=Number(r);e.push([t|24,n])}else if(r<M[2]){let n=Number(r);e.push([t|25,n>>>8,n&255])}else if(r<M[3]){let n=Number(r);e.push([t|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(r);if(n<M[4]){let o=[t|27,0,0,0,0,0,0,0],s=Number(n&BigInt(4294967295)),i=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=s&255,s=s>>8,o[7]=s&255,s=s>>8,o[6]=s&255,s=s>>8,o[5]=s&255,o[4]=i&255,i=i>>8,o[3]=i&255,i=i>>8,o[2]=i&255,i=i>>8,o[1]=i&255,e.push(o)}else throw new Error(`${w} encountered BigInt larger than allowable range`)}}var M,ve=S(()=>{X();te();M=[24,256,65536,4294967296,BigInt("18446744073709551616")];le.encodedSize=function(t){return G.encodedSize(t.value)};G.encodedSize=function(t){return t<M[0]?1:t<M[1]?2:t<M[2]?3:t<M[3]?5:9};le.compareTokens=function(t,r){return t.value<r.value?-1:t.value>r.value?1:0}});function xi(e,t,r,n){return new p(f.negint,-1-re(e,t+1,n),2)}function Si(e,t,r,n){return new p(f.negint,-1-ne(e,t+1,n),3)}function Ci(e,t,r,n){return new p(f.negint,-1-oe(e,t+1,n),5)}function Pi(e,t,r,n){let o=se(e,t+1,n);if(typeof o!="bigint"){let s=-1-o;if(s>=Number.MIN_SAFE_INTEGER)return new p(f.negint,s,9)}if(n.allowBigInt!==!0)throw new Error(`${w} integers outside of the safe integer range are not supported`);return new p(f.negint,Jn-BigInt(o),9)}function Br(e,t){let r=t.value,n=typeof r=="bigint"?r*Jn-Ti:r*-1-1;G(e,t.type.majorEncoded,n)}var Jn,Ti,Kn=S(()=>{X();ve();te();Jn=BigInt(-1),Ti=BigInt(1);Br.encodedSize=function(t){let r=t.value,n=typeof r=="bigint"?r*Jn-Ti:r*-1-1;return n<M[0]?1:n<M[1]?2:n<M[2]?3:n<M[3]?5:9};Br.compareTokens=function(t,r){return t.value<r.value?1:t.value>r.value?-1:0}});function Wt(e,t,r,n){_e(e,t,r+n);let o=yt(e,t+r,t+r+n);return new p(f.bytes,o,r+n)}function Ai(e,t,r,n){return Wt(e,t,1,r)}function vi(e,t,r,n){return Wt(e,t,2,re(e,t+1,n))}function Bi(e,t,r,n){return Wt(e,t,3,ne(e,t+1,n))}function Ui(e,t,r,n){return Wt(e,t,5,oe(e,t+1,n))}function ki(e,t,r,n){let o=se(e,t+1,n);if(typeof o=="bigint")throw new Error(`${w} 64-bit integer bytes lengths not supported`);return Wt(e,t,9,o)}function Ur(e){return e.encodedBytes===void 0&&(e.encodedBytes=e.type===f.string?vr(e.value):e.value),e.encodedBytes}function gt(e,t){let r=Ur(t);G(e,t.type.majorEncoded,r.length),e.push(r)}function Gm(e,t){return e.length<t.length?-1:e.length>t.length?1:yi(e,t)}var kr=S(()=>{X();te();ve();je();gt.encodedSize=function(t){let r=Ur(t);return G.encodedSize(r.length)+r.length};gt.compareTokens=function(t,r){return Gm(Ur(t),Ur(r))}});function Jt(e,t,r,n,o){let s=r+n;_e(e,t,s);let i=new p(f.string,di(e,t+r,t+s),s);return o.retainStringBytes===!0&&(i.byteValue=yt(e,t+r,t+s)),i}function Ii(e,t,r,n){return Jt(e,t,1,r,n)}function _i(e,t,r,n){return Jt(e,t,2,re(e,t+1,n),n)}function Ni(e,t,r,n){return Jt(e,t,3,ne(e,t+1,n),n)}function Oi(e,t,r,n){return Jt(e,t,5,oe(e,t+1,n),n)}function Ri(e,t,r,n){let o=se(e,t+1,n);if(typeof o=="bigint")throw new Error(`${w} 64-bit integer string lengths not supported`);return Jt(e,t,9,o,n)}var Li,Xn=S(()=>{X();te();ve();kr();je();Li=gt});function wt(e,t,r,n){return new p(f.array,n,r)}function $i(e,t,r,n){return wt(e,t,1,r)}function Fi(e,t,r,n){return wt(e,t,2,re(e,t+1,n))}function ji(e,t,r,n){return wt(e,t,3,ne(e,t+1,n))}function zi(e,t,r,n){return wt(e,t,5,oe(e,t+1,n))}function Mi(e,t,r,n){let o=se(e,t+1,n);if(typeof o=="bigint")throw new Error(`${w} 64-bit integer array lengths not supported`);return wt(e,t,9,o)}function qi(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${w} indefinite length items not allowed`);return wt(e,t,1,1/0)}function Ir(e,t){G(e,f.array.majorEncoded,t.value)}var Qn=S(()=>{X();ve();te();Ir.compareTokens=le.compareTokens;Ir.encodedSize=function(t){return G.encodedSize(t.value)}});function bt(e,t,r,n){return new p(f.map,n,r)}function Hi(e,t,r,n){return bt(e,t,1,r)}function Vi(e,t,r,n){return bt(e,t,2,re(e,t+1,n))}function Gi(e,t,r,n){return bt(e,t,3,ne(e,t+1,n))}function Wi(e,t,r,n){return bt(e,t,5,oe(e,t+1,n))}function Ji(e,t,r,n){let o=se(e,t+1,n);if(typeof o=="bigint")throw new Error(`${w} 64-bit integer map lengths not supported`);return bt(e,t,9,o)}function Ki(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${w} indefinite length items not allowed`);return bt(e,t,1,1/0)}function _r(e,t){G(e,f.map.majorEncoded,t.value)}var Zn=S(()=>{X();ve();te();_r.compareTokens=le.compareTokens;_r.encodedSize=function(t){return G.encodedSize(t.value)}});function Xi(e,t,r,n){return new p(f.tag,r,1)}function Qi(e,t,r,n){return new p(f.tag,re(e,t+1,n),2)}function Zi(e,t,r,n){return new p(f.tag,ne(e,t+1,n),3)}function Yi(e,t,r,n){return new p(f.tag,oe(e,t+1,n),5)}function ea(e,t,r,n){return new p(f.tag,se(e,t+1,n),9)}function Nr(e,t){G(e,f.tag.majorEncoded,t.value)}var Yn=S(()=>{X();ve();Nr.compareTokens=le.compareTokens;Nr.encodedSize=function(t){return G.encodedSize(t.value)}});function ta(e,t,r,n){if(n.allowUndefined===!1)throw new Error(`${w} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new p(f.null,null,1):new p(f.undefined,void 0,1)}function ra(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${w} indefinite length items not allowed`);return new p(f.break,void 0,1)}function eo(e,t,r){if(r){if(r.allowNaN===!1&&Number.isNaN(e))throw new Error(`${w} NaN values are not supported`);if(r.allowInfinity===!1&&(e===1/0||e===-1/0))throw new Error(`${w} Infinity values are not supported`)}return new p(f.float,e,t)}function na(e,t,r,n){return eo(to(e,t+1),3,n)}function oa(e,t,r,n){return eo(ro(e,t+1),5,n)}function sa(e,t,r,n){return eo(ua(e,t+1),9,n)}function Or(e,t,r){let n=t.value;if(n===!1)e.push([f.float.majorEncoded|Zm]);else if(n===!0)e.push([f.float.majorEncoded|Ym]);else if(n===null)e.push([f.float.majorEncoded|eh]);else if(n===void 0)e.push([f.float.majorEncoded|th]);else{let o,s=!1;(!r||r.float64!==!0)&&(aa(n),o=to(De,1),n===o||Number.isNaN(n)?(De[0]=249,e.push(De.slice(0,3)),s=!0):(ca(n),o=ro(De,1),n===o&&(De[0]=250,e.push(De.slice(0,5)),s=!0))),s||(rh(n),o=ua(De,1),De[0]=251,e.push(De.slice(0,9)))}}function aa(e){if(e===1/0)pe.setUint16(0,31744,!1);else if(e===-1/0)pe.setUint16(0,64512,!1);else if(Number.isNaN(e))pe.setUint16(0,32256,!1);else{pe.setFloat32(0,e);let t=pe.getUint32(0),r=(t&2139095040)>>23,n=t&8388607;if(r===255)pe.setUint16(0,31744,!1);else if(r===0)pe.setUint16(0,(e&2147483648)>>16|n>>13,!1);else{let o=r-127;o<-24?pe.setUint16(0,0):o<-14?pe.setUint16(0,(t&2147483648)>>16|1<<24+o,!1):pe.setUint16(0,(t&2147483648)>>16|o+15<<10|n>>13,!1)}}}function to(e,t){if(e.length-t<2)throw new Error(`${w} not enough data for float16`);let r=(e[t]<<8)+e[t+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let n=r>>10&31,o=r&1023,s;return n===0?s=o*2**-24:n!==31?s=(o+1024)*2**(n-25):s=o===0?1/0:NaN,r&32768?-s:s}function ca(e){pe.setFloat32(0,e,!1)}function ro(e,t){if(e.length-t<4)throw new Error(`${w} not enough data for float32`);let r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,4).getFloat32(0,!1)}function rh(e){pe.setFloat64(0,e,!1)}function ua(e,t){if(e.length-t<8)throw new Error(`${w} not enough data for float64`);let r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,8).getFloat64(0,!1)}var Zm,Ym,eh,th,ia,pe,De,no=S(()=>{X();te();ve();Zm=20,Ym=21,eh=22,th=23;Or.encodedSize=function(t,r){let n=t.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!r||r.float64!==!0){aa(n);let o=to(De,1);if(n===o||Number.isNaN(n))return 3;if(ca(n),o=ro(De,1),n===o)return 5}return 9};ia=new ArrayBuffer(9),pe=new DataView(ia,1),De=new Uint8Array(ia,0);Or.compareTokens=le.compareTokens});function U(e,t,r){throw new Error(`${w} encountered invalid minor (${r}) for major ${e[t]>>>5}`)}function Rr(e){return()=>{throw new Error(`${w} ${e}`)}}function fa(e){switch(e.type){case f.false:return Ae([244]);case f.true:return Ae([245]);case f.null:return Ae([246]);case f.bytes:return e.value.length?void 0:Ae([64]);case f.string:return e.value===""?Ae([96]):void 0;case f.array:return e.value===0?Ae([128]):void 0;case f.map:return e.value===0?Ae([160]):void 0;case f.uint:return e.value<24?Ae([Number(e.value)]):void 0;case f.negint:if(e.value>=-24)return Ae([31-Number(e.value)])}}var g,Ee,oo=S(()=>{X();ve();Kn();kr();Xn();Qn();Zn();Yn();no();te();je();g=[];for(let e=0;e<=23;e++)g[e]=U;g[24]=wi;g[25]=bi;g[26]=Di;g[27]=Ei;g[28]=U;g[29]=U;g[30]=U;g[31]=U;for(let e=32;e<=55;e++)g[e]=U;g[56]=xi;g[57]=Si;g[58]=Ci;g[59]=Pi;g[60]=U;g[61]=U;g[62]=U;g[63]=U;for(let e=64;e<=87;e++)g[e]=Ai;g[88]=vi;g[89]=Bi;g[90]=Ui;g[91]=ki;g[92]=U;g[93]=U;g[94]=U;g[95]=Rr("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)g[e]=Ii;g[120]=_i;g[121]=Ni;g[122]=Oi;g[123]=Ri;g[124]=U;g[125]=U;g[126]=U;g[127]=Rr("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)g[e]=$i;g[152]=Fi;g[153]=ji;g[154]=zi;g[155]=Mi;g[156]=U;g[157]=U;g[158]=U;g[159]=qi;for(let e=160;e<=183;e++)g[e]=Hi;g[184]=Vi;g[185]=Gi;g[186]=Wi;g[187]=Ji;g[188]=U;g[189]=U;g[190]=U;g[191]=Ki;for(let e=192;e<=215;e++)g[e]=Xi;g[216]=Qi;g[217]=Zi;g[218]=Yi;g[219]=ea;g[220]=U;g[221]=U;g[222]=U;g[223]=U;for(let e=224;e<=243;e++)g[e]=Rr("simple values are not supported");g[244]=U;g[245]=U;g[246]=U;g[247]=ta;g[248]=Rr("simple values are not supported");g[249]=na;g[250]=oa;g[251]=sa;g[252]=U;g[253]=U;g[254]=U;g[255]=ra;Ee=[];for(let e=0;e<24;e++)Ee[e]=new p(f.uint,e,1);for(let e=-1;e>=-24;e--)Ee[31-e]=new p(f.negint,e,1);Ee[64]=new p(f.bytes,new Uint8Array(0),1);Ee[96]=new p(f.string,"",1);Ee[128]=new p(f.array,0,1);Ee[160]=new p(f.map,0,1);Ee[244]=new p(f.false,!1,1);Ee[245]=new p(f.true,!0,1);Ee[246]=new p(f.null,null,1)});function sh(){let e=[];return e[f.uint.major]=le,e[f.negint.major]=Br,e[f.bytes.major]=gt,e[f.string.major]=Li,e[f.array.major]=Ir,e[f.map.major]=_r,e[f.tag.major]=Nr,e[f.float.major]=Or,e}function Lr(e,t={},r){let n=ci(e),o=t&&t.typeEncoders&&t.typeEncoders[n]||Me[n];if(typeof o=="function"){let i=o(e,n,t,r);if(i!=null)return i}let s=Me[n];if(!s)throw new Error(`${Ie} unsupported type: ${n}`);return s(e,n,t,r)}function ih(e,t){t.mapSorter&&e.sort(t.mapSorter)}function ah(e,t){let r=Array.isArray(e[0])?e[0][0]:e[0],n=Array.isArray(t[0])?t[0][0]:t[0];if(r.type!==n.type)return r.type.compare(n.type);let o=r.type.major,s=la[o].compareTokens(r,n);return s===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),s}function pa(e,t,r,n){if(Array.isArray(t))for(let o of t)pa(e,o,r,n);else r[t.type.major](e,t,n)}function io(e,t,r){let n=Lr(e,r);if(!Array.isArray(n)&&r.quickEncodeToken){let o=r.quickEncodeToken(n);if(o)return o;let s=t[n.type.major];if(s.encodedSize){let i=s.encodedSize(n,r),a=new Vt(i);if(s(a,n,r),a.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return Ht(a.chunks[0])}}return so.reset(),pa(so,n,t,r),so.toBytes(!0)}function Kt(e,t){return t=Object.assign({},oh,t),io(e,la,t)}var oh,la,so,$r,ze,Me,ao=S(()=>{ui();X();gi();te();oo();je();ve();Kn();kr();Xn();Qn();Zn();Yn();no();oh={float64:!1,mapSorter:ah,quickEncodeToken:fa};la=sh(),so=new Vt,$r=class e{constructor(t,r){this.obj=t,this.parent=r}includes(t){let r=this;do if(r.obj===t)return!0;while(r=r.parent);return!1}static createCheck(t,r){if(t&&t.includes(r))throw new Error(`${Ie} object contains circular references`);return new e(r,t)}},ze={null:new p(f.null,null),undefined:new p(f.undefined,void 0),true:new p(f.true,!0),false:new p(f.false,!1),emptyArray:new p(f.array,0),emptyMap:new p(f.map,0)},Me={number(e,t,r,n){return!Number.isInteger(e)||!Number.isSafeInteger(e)?new p(f.float,e):e>=0?new p(f.uint,e):new p(f.negint,e)},bigint(e,t,r,n){return e>=BigInt(0)?new p(f.uint,e):new p(f.negint,e)},Uint8Array(e,t,r,n){return new p(f.bytes,e)},string(e,t,r,n){return new p(f.string,e)},boolean(e,t,r,n){return e?ze.true:ze.false},null(e,t,r,n){return ze.null},undefined(e,t,r,n){return ze.undefined},ArrayBuffer(e,t,r,n){return new p(f.bytes,new Uint8Array(e))},DataView(e,t,r,n){return new p(f.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,t,r,n){if(!e.length)return r.addBreakTokens===!0?[ze.emptyArray,new p(f.break)]:ze.emptyArray;n=$r.createCheck(n,e);let o=[],s=0;for(let i of e)o[s++]=Lr(i,r,n);return r.addBreakTokens?[new p(f.array,e.length),o,new p(f.break)]:[new p(f.array,e.length),o]},Object(e,t,r,n){let o=t!=="Object",s=o?e.keys():Object.keys(e),i=o?e.size:s.length;if(!i)return r.addBreakTokens===!0?[ze.emptyMap,new p(f.break)]:ze.emptyMap;n=$r.createCheck(n,e);let a=[],l=0;for(let h of s)a[l++]=[Lr(h,r,n),Lr(o?e.get(h):e[h],r,n)];return ih(a,r),r.addBreakTokens?[new p(f.map,i),a,new p(f.break)]:[new p(f.map,i),a]}};Me.Map=Me.Object;Me.Buffer=Me.Uint8Array;for(let e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Me[`${e}Array`]=Me.DataView});function uh(e,t,r){let n=[];for(let o=0;o<e.value;o++){let s=Qt(t,r);if(s===Fr){if(e.value===1/0)break;throw new Error(`${w} got unexpected break to lengthed array`)}if(s===Xt)throw new Error(`${w} found array but not enough entries (got ${o}, expected ${e.value})`);n[o]=s}return n}function fh(e,t,r){let n=r.useMaps===!0,o=n?void 0:{},s=n?new Map:void 0;for(let i=0;i<e.value;i++){let a=Qt(t,r);if(a===Fr){if(e.value===1/0)break;throw new Error(`${w} got unexpected break to lengthed map`)}if(a===Xt)throw new Error(`${w} found map but not enough entries (got ${i} [no key], expected ${e.value})`);if(n!==!0&&typeof a!="string")throw new Error(`${w} non-string keys not supported (got ${typeof a})`);if(r.rejectDuplicateMapKeys===!0&&(n&&s.has(a)||!n&&a in o))throw new Error(`${w} found repeat map key "${a}"`);let l=Qt(t,r);if(l===Xt)throw new Error(`${w} found map but not enough entries (got ${i} [no value], expected ${e.value})`);n?s.set(a,l):o[a]=l}return n?s:o}function Qt(e,t){if(e.done())return Xt;let r=e.next();if(r.type===f.break)return Fr;if(r.type.terminal)return r.value;if(r.type===f.array)return uh(r,e,t);if(r.type===f.map)return fh(r,e,t);if(r.type===f.tag){if(t.tags&&typeof t.tags[r.value]=="function"){let n=Qt(e,t);return t.tags[r.value](n)}throw new Error(`${w} tag not supported (${r.value})`)}throw new Error("unsupported")}function Ze(e,t){if(!(e instanceof Uint8Array))throw new Error(`${w} data to decode must be a Uint8Array`);t=Object.assign({},ch,t);let r=t.tokenizer||new co(e,t),n=Qt(r,t);if(n===Xt)throw new Error(`${w} did not find any content to decode`);if(n===Fr)throw new Error(`${w} got unexpected break`);if(!r.done())throw new Error(`${w} too many terminals, data makes no sense`);return n}var ch,co,Xt,Fr,uo=S(()=>{te();X();oo();ch={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},co=class{constructor(t,r={}){this.pos=0,this.data=t,this.options=r}done(){return this.pos>=this.data.length}next(){let t=this.data[this.pos],r=Ee[t];if(r===void 0){let n=g[t];if(!n)throw new Error(`${w} no decoder for major type ${t>>>5} (byte 0x${t.toString(16).padStart(2,"0")})`);let o=t&31;r=n(this.data,this.pos,o,this.options)}return this.pos+=r.encodedLength,r}},Xt=Symbol.for("DONE"),Fr=Symbol.for("BREAK")});var jr=S(()=>{ao();uo();X()});var po,lo,mo=S(()=>{lt();po=({name:e,code:t,encode:r})=>new lo(e,t,r),lo=class{constructor(t,r,n){this.name=t,this.code=r,this.encode=n}digest(t){if(t instanceof Uint8Array){let r=this.encode(t);return r instanceof Uint8Array?$e(this.code,r):r.then(n=>$e(this.code,n))}else throw Error("Unknown type, must be binary type")}}});var ho=S(()=>{C();Dr();Le();mo();lt()});var qr={};I(qr,{base64:()=>zr,base64pad:()=>Dh,base64url:()=>Mr,base64urlpad:()=>Eh});var zr,Dh,Mr,Eh,Zt=S(()=>{be();zr=O({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Dh=O({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Mr=O({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Eh=O({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});var xo=D(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});Et.fromBase64url=Et.toBase64url=void 0;var wa=(Zt(),V(qr));function _h(e){return wa.base64url.encode(e).slice(1)}Et.toBase64url=_h;function Nh(e){return wa.base64url.decode(`u${e}`)}Et.fromBase64url=Nh});var ba=D(Co=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});var Ye=xo(),So=(C(),V(Tr));function Oh(e){let[t,r,n]=e;return{payload:r,signatures:[{protected:t,signature:n}],link:So.CID.decode(Ye.fromBase64url(r))}}function Rh(e){let t={signature:Ye.fromBase64url(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=Ye.fromBase64url(e.protected)),t}function Lh(e){let t=Ye.fromBase64url(e.payload);try{So.CID.decode(t)}catch{throw new Error("Not a valid DagJWS")}return{payload:t,signatures:e.signatures.map(Rh)}}function $h(e){let t={signature:Ye.toBase64url(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=Ye.toBase64url(e.protected)),t}function Fh(e){let t={payload:Ye.toBase64url(e.payload),signatures:e.signatures.map($h)};return t.link=So.CID.decode(new Uint8Array(e.payload)),t}Co.default={fromSplit:Oh,encode:Lh,decode:Fh}});var Da=D(To=>{"use strict";Object.defineProperty(To,"__esModule",{value:!0});var de=xo();function jh(e){let[t,r,n,o,s]=e,i={ciphertext:o,iv:n,protected:t,tag:s};return r&&(i.recipients=[{encrypted_key:r}]),i}function zh(e){let t={};return e.encrypted_key&&(t.encrypted_key=de.fromBase64url(e.encrypted_key)),e.header&&(t.header=e.header),t}function Mh(e){let t={ciphertext:de.fromBase64url(e.ciphertext),protected:de.fromBase64url(e.protected),iv:de.fromBase64url(e.iv),tag:de.fromBase64url(e.tag)};return e.aad&&(t.aad=de.fromBase64url(e.aad)),e.recipients&&(t.recipients=e.recipients.map(zh)),e.unprotected&&(t.unprotected=e.unprotected),t}function qh(e){let t={};return e.encrypted_key&&(t.encrypted_key=de.toBase64url(e.encrypted_key)),e.header&&(t.header=e.header),t}function Hh(e){let t={ciphertext:de.toBase64url(e.ciphertext),protected:de.toBase64url(e.protected),iv:de.toBase64url(e.iv),tag:de.toBase64url(e.tag)};return e.aad&&(t.aad=de.toBase64url(e.aad)),e.recipients&&(t.recipients=e.recipients.map(qh)),e.unprotected&&(t.unprotected=e.unprotected),t}To.default={fromSplit:jh,decode:Hh,encode:Mh}});var Sa={};I(Sa,{code:()=>Qh,decode:()=>Yh,encode:()=>Zh,name:()=>Xh});function Vh(e){if(e.asCID!==e)return null;let t=m.asCID(e);if(!t)return null;let r=new Uint8Array(t.bytes.byteLength+1);return r.set(t.bytes,1),[new p(f.tag,Ea),new p(f.bytes,r)]}function Gh(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function Wh(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}function Kh(e){if(e[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return m.decode(e.subarray(1))}var Ea,Jh,xa,Xh,Qh,Zh,Yh,Ca=S(()=>{jr();C();Ea=42;Jh={float64:!0,typeEncoders:{Object:Vh,undefined:Gh,number:Wh}};xa={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};xa.tags[Ea]=Kh;Xh="dag-cbor",Qh=113,Zh=e=>Kt(e,Jh),Yh=e=>Ze(e,xa)});var Ua=D(L=>{"use strict";var ey=L&&L.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ty=L&&L.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ry=L&&L.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&ey(t,e,r);return ty(t,e),t},Ta=L&&L.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(L,"__esModule",{value:!0});L.decode=L.encode=L.toGeneral=L.code=L.name=void 0;var Po=Ta(ba()),Ao=Ta(Da()),Pa=ry((Ca(),V(Sa)));L.name="dag-jose";L.code=133;function Aa(e){return"payload"in e&&typeof e.payload=="string"&&"signatures"in e&&Array.isArray(e.signatures)}function ny(e){return"payload"in e&&e.payload instanceof Uint8Array&&"signatures"in e&&Array.isArray(e.signatures)}function oy(e){return"ciphertext"in e&&e.ciphertext instanceof Uint8Array&&"iv"in e&&e.iv instanceof Uint8Array&&"protected"in e&&e.protected instanceof Uint8Array&&"tag"in e&&e.tag instanceof Uint8Array}function va(e){return"ciphertext"in e&&typeof e.ciphertext=="string"&&"iv"in e&&typeof e.iv=="string"&&"protected"in e&&typeof e.protected=="string"&&"tag"in e&&typeof e.tag=="string"}function Ba(e){if(typeof e=="string"){let t=e.split(".");if(t.length===3)return Po.default.fromSplit(t);if(t.length===5)return Ao.default.fromSplit(t);throw new Error("Not a valid JOSE string")}if(Aa(e)||va(e))return e;throw new Error("Not a valid unencoded JOSE object")}L.toGeneral=Ba;function sy(e){typeof e=="string"&&(e=Ba(e));let t;if(Aa(e))t=Po.default.encode(e);else if(va(e))t=Ao.default.encode(e);else throw new Error("Not a valid JOSE object");return new Uint8Array(Pa.encode(t))}L.encode=sy;function iy(e){let t;try{t=Pa.decode(e)}catch{throw new Error("Not a valid DAG-JOSE object")}if(ny(t))return Po.default.decode(t);if(oy(t))return Ao.default.decode(t);throw new Error("Not a valid DAG-JOSE object")}L.decode=iy});var vo={};I(vo,{identity:()=>Hr});var ka,ay,Ia,cy,Hr,Bo=S(()=>{Le();lt();ka=0,ay="identity",Ia=we,cy=e=>$e(ka,Ia(e)),Hr={code:ka,name:ay,encode:Ia,digest:cy}});var Uo={};I(Uo,{identity:()=>uy});var uy,_a=S(()=>{be();Le();uy=pt({prefix:"\0",name:"identity",encode:e=>Vs(e),decode:e=>Hs(e)})});var ko={};I(ko,{base2:()=>fy});var fy,Na=S(()=>{be();fy=O({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var Io={};I(Io,{base8:()=>ly});var ly,Oa=S(()=>{be();ly=O({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var _o={};I(_o,{base10:()=>py});var py,Ra=S(()=>{be();py=Fe({prefix:"9",name:"base10",alphabet:"0123456789"})});var No={};I(No,{base16:()=>dy,base16upper:()=>my});var dy,my,La=S(()=>{be();dy=O({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),my=O({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var Oo={};I(Oo,{base36:()=>hy,base36upper:()=>yy});var hy,yy,$a=S(()=>{be();hy=Fe({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),yy=Fe({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var Ro={};I(Ro,{base256emoji:()=>Ey});function by(e){return e.reduce((t,r)=>(t+=gy[r],t),"")}function Dy(e){let t=[];for(let r of e){let n=wy[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}var Fa,gy,wy,Ey,ja=S(()=>{be();Fa=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),gy=Fa.reduce((e,t,r)=>(e[r]=t,e),[]),wy=Fa.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);Ey=pt({prefix:"\u{1F680}",name:"base256emoji",encode:by,decode:Dy})});var Lo={};I(Lo,{sha256:()=>xy,sha512:()=>Sy});var za,xy,Sy,Ma=S(()=>{mo();za=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),xy=po({name:"sha2-256",code:18,encode:za("SHA-256")}),Sy=po({name:"sha2-512",code:19,encode:za("SHA-512")})});var $o={};I($o,{code:()=>Ty,decode:()=>Ay,encode:()=>Py,name:()=>Cy});var Cy,Ty,Py,Ay,qa=S(()=>{Le();Cy="raw",Ty=85,Py=e=>we(e),Ay=e=>we(e)});var Fo={};I(Fo,{code:()=>ky,decode:()=>_y,encode:()=>Iy,name:()=>Uy});var vy,By,Uy,ky,Iy,_y,Ha=S(()=>{vy=new TextEncoder,By=new TextDecoder,Uy="json",ky=512,Iy=e=>vy.encode(JSON.stringify(e)),_y=e=>JSON.parse(By.decode(e))});var Yt,Va,Ga,jo=S(()=>{_a();Na();Oa();Ra();La();xr();$a();zt();Zt();ja();Ma();Bo();qa();Ha();ho();Yt={...Uo,...ko,...Io,..._o,...No,...Er,...Oo,...jt,...qr,...Ro},Va={...Lo,...vo},Ga={raw:$o,json:Fo}});var Ka=D((w1,Ja)=>{"use strict";var Wa="[a-fA-F\\d:]",qe=e=>e&&e.includeBoundaries?`(?:(?<=\\s|^)(?=${Wa})|(?<=${Wa})(?=\\s|$))`:"",xe="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",$="[a-fA-F\\d]{1,4}",Vr=`
(?:
(?:${$}:){7}(?:${$}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${$}:){6}(?:${xe}|:${$}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${$}:){5}(?::${xe}|(?::${$}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${$}:){4}(?:(?::${$}){0,1}:${xe}|(?::${$}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${$}:){3}(?:(?::${$}){0,2}:${xe}|(?::${$}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${$}:){2}(?:(?::${$}){0,3}:${xe}|(?::${$}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${$}:){1}(?:(?::${$}){0,4}:${xe}|(?::${$}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${$}){0,5}:${xe}|(?::${$}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),Ny=new RegExp(`(?:^${xe}$)|(?:^${Vr}$)`),Oy=new RegExp(`^${xe}$`),Ry=new RegExp(`^${Vr}$`),zo=e=>e&&e.exact?Ny:new RegExp(`(?:${qe(e)}${xe}${qe(e)})|(?:${qe(e)}${Vr}${qe(e)})`,"g");zo.v4=e=>e&&e.exact?Oy:new RegExp(`${qe(e)}${xe}${qe(e)}`,"g");zo.v6=e=>e&&e.exact?Ry:new RegExp(`${qe(e)}${Vr}${qe(e)}`,"g");Ja.exports=zo});var Qa=D((b1,Xa)=>{"use strict";var Mo=Ka(),xt=e=>Mo({exact:!0}).test(e);xt.v4=e=>Mo.v4({exact:!0}).test(e);xt.v6=e=>Mo.v6({exact:!0}).test(e);xt.version=e=>xt(e)?xt.v4(e)?4:6:void 0;Xa.exports=xt});function St(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}var Gr=S(()=>{});function Wr(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?St(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}var qo=S(()=>{Gr()});function Ya(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var Za,Ho,Ly,Jr,Vo=S(()=>{jo();qo();Za=Ya("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Ho=Ya("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=Wr(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),Ly={utf8:Za,"utf-8":Za,hex:Yt.base16,latin1:Ho,ascii:Ho,binary:Ho,...Yt},Jr=Ly});var er={};I(er,{toString:()=>et});function et(e,t="utf8"){let r=Jr[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}var He=S(()=>{Vo()});var oc=D((A1,nc)=>{"use strict";var Wo=Qa(),{toString:ec}=(He(),V(er)),$y=Wo,Go=Wo.v4,tc=Wo.v6,rc=function(e,t,r){r=~~r;let n;if(Go(e))n=t||new Uint8Array(r+4),e.split(/\./g).map(function(o){n[r++]=parseInt(o,10)&255});else if(tc(e)){let o=e.split(":",8),s;for(s=0;s<o.length;s++){let i=Go(o[s]),a;i&&(a=rc(o[s]),o[s]=ec(a.slice(0,2),"base16")),a&&++s<8&&o.splice(s,0,ec(a.slice(2,4),"base16"))}if(o[0]==="")for(;o.length<8;)o.unshift("0");else if(o[o.length-1]==="")for(;o.length<8;)o.push("0");else if(o.length<8){for(s=0;s<o.length&&o[s]!=="";s++);let i=[s,"1"];for(s=9-o.length;s>0;s--)i.push("0");o.splice.apply(o,i)}for(n=t||new Uint8Array(r+16),s=0;s<o.length;s++){let i=parseInt(o[s],16);n[r++]=i>>8&255,n[r++]=i&255}}if(!n)throw Error("Invalid ip address: "+e);return n},Fy=function(e,t,r){t=~~t,r=r||e.length-t;let n=[],o,s=new DataView(e.buffer);if(r===4){for(let i=0;i<r;i++)n.push(e[t+i]);o=n.join(".")}else if(r===16){for(let i=0;i<r;i+=2)n.push(s.getUint16(t+i).toString(16));o=n.join(":"),o=o.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),o=o.replace(/:{3,4}/,"::")}return o};nc.exports={isIP:$y,isV4:Go,isV6:tc,toBytes:rc,toString:Fy}});var Kr=D((v1,ic)=>{"use strict";function Z(e){if(typeof e=="number"){if(Z.codes[e])return Z.codes[e];throw new Error("no protocol with code: "+e)}else if(typeof e=="string"){if(Z.names[e])return Z.names[e];throw new Error("no protocol with name: "+e)}throw new Error("invalid protocol id type: "+e)}var me=-1;Z.lengthPrefixedVarSize=me;Z.V=me;Z.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,me,"ip6zone"],[53,me,"dns","resolvable"],[54,me,"dns4","resolvable"],[55,me,"dns6","resolvable"],[56,me,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,me,"unix",!1,"path"],[421,me,"ipfs"],[421,me,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,me,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,me,"memory"]];Z.names={};Z.codes={};Z.table.map(e=>{let t=sc.apply(null,e);return Z.codes[t.code]=t,Z.names[t.name]=t,null});Z.object=sc;function sc(e,t,r,n,o){return{code:e,size:t,name:r,resolvable:!!n,path:!!o}}ic.exports=Z});var ac={};I(ac,{fromString:()=>Ne});function Ne(e,t="utf8"){let r=Jr[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?St(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}var Ct=S(()=>{Vo();Gr()});var Jo={};I(Jo,{concat:()=>jy});function jy(e,t){t||(t=e.reduce((o,s)=>o+s.length,0));let r=Wr(t),n=0;for(let o of e)r.set(o,n),n+=o.length;return St(r)}var Ko=S(()=>{qo();Gr()});var hc=D((_1,mc)=>{"use strict";var Xr=oc(),fc=Kr(),{CID:zy}=(C(),V(Tr)),{base32:lc}=(xr(),V(Er)),{base58btc:My}=(zt(),V(jt)),qy=(lt(),V(Xe)),Tt=Nn(),{toString:Qr}=(He(),V(er)),{fromString:pc}=(Ct(),V(ac)),{concat:Zr}=(Ko(),V(Jo));mc.exports=tr;function tr(e,t){return t instanceof Uint8Array?tr.toString(e,t):tr.toBytes(e,t)}tr.toString=function(t,r){switch(fc(t).code){case 4:case 41:return Hy(r);case 6:case 273:case 33:case 132:return dc(r).toString();case 53:case 54:case 55:case 56:case 400:case 777:return Gy(r);case 421:return Jy(r);case 444:return uc(r);case 445:return uc(r);default:return Qr(r,"base16")}};tr.toBytes=function(t,r){switch(fc(t).code){case 4:return cc(r);case 41:return cc(r);case 6:case 273:case 33:case 132:return Xo(parseInt(r,10));case 53:case 54:case 55:case 56:case 400:case 777:return Vy(r);case 421:return Wy(r);case 444:return Ky(r);case 445:return Xy(r);default:return pc(r,"base16")}};function cc(e){if(!Xr.isIP(e))throw new Error("invalid ip address");return Xr.toBytes(e)}function Hy(e){let t=Xr.toString(e);if(!t||!Xr.isIP(t))throw new Error("invalid ip address");return t}function Xo(e){let t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e),new Uint8Array(t)}function dc(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function Vy(e){let t=pc(e),r=Uint8Array.from(Tt.encode(t.length));return Zr([r,t],r.length+t.length)}function Gy(e){let t=Tt.decode(e);if(e=e.slice(Tt.decode.bytes),e.length!==t)throw new Error("inconsistent lengths");return Qr(e)}function Wy(e){let t;e[0]==="Q"||e[0]==="1"?t=qy.decode(My.decode(`z${e}`)).bytes:t=zy.parse(e).multihash.bytes;let r=Uint8Array.from(Tt.encode(t.length));return Zr([r,t],r.length+t.length)}function Jy(e){let t=Tt.decode(e),r=e.slice(Tt.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return Qr(r,"base58btc")}function Ky(e){let t=e.split(":");if(t.length!==2)throw new Error("failed to parse onion addr: "+t+" does not contain a port number");if(t[0].length!==16)throw new Error("failed to parse onion addr: "+t[0]+" not a Tor onion address.");let r=lc.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=Xo(n);return Zr([r,o],r.length+o.length)}function Xy(e){let t=e.split(":");if(t.length!==2)throw new Error("failed to parse onion addr: "+t+" does not contain a port number");if(t[0].length!==56)throw new Error("failed to parse onion addr: "+t[0]+" not a Tor onion3 address.");let r=lc.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=Xo(n);return Zr([r,o],r.length+o.length)}function uc(e){let t=e.slice(0,e.length-2),r=e.slice(e.length-2),n=Qr(t,"base32"),o=dc(r);return n+":"+o}});var Ac=D((N1,Pc)=>{"use strict";var gc=hc(),Qo=Kr(),rr=Nn(),{concat:yc}=(Ko(),V(Jo)),{toString:Qy}=(He(),V(er));Pc.exports={stringToStringTuples:wc,stringTuplesToString:bc,tuplesToStringTuples:Ec,stringTuplesToTuples:Dc,bytesToTuples:Zo,tuplesToBytes:xc,bytesToString:Zy,stringToBytes:Cc,fromString:Yy,fromBytes:Tc,validateBytes:Yo,isValidBytes:eg,cleanPath:Yr,ParseError:es,protoFromTuple:nr,sizeForAddr:Sc};function wc(e){let t=[],r=e.split("/").slice(1);if(r.length===1&&r[0]==="")return[];for(let n=0;n<r.length;n++){let o=r[n],s=Qo(o);if(s.size===0){t.push([o]);continue}if(n++,n>=r.length)throw es("invalid address: "+e);if(s.path){t.push([o,Yr(r.slice(n).join("/"))]);break}t.push([o,r[n]])}return t}function bc(e){let t=[];return e.map(r=>{let n=nr(r);return t.push(n.name),r.length>1&&t.push(r[1]),null}),Yr(t.join("/"))}function Dc(e){return e.map(t=>{Array.isArray(t)||(t=[t]);let r=nr(t);return t.length>1?[r.code,gc.toBytes(r.code,t[1])]:[r.code]})}function Ec(e){return e.map(t=>{let r=nr(t);return t[1]?[r.code,gc.toString(r.code,t[1])]:[r.code]})}function xc(e){return Tc(yc(e.map(t=>{let r=nr(t),n=Uint8Array.from(rr.encode(r.code));return t.length>1&&(n=yc([n,t[1]])),n})))}function Sc(e,t){return e.size>0?e.size/8:e.size===0?0:rr.decode(t)+rr.decode.bytes}function Zo(e){let t=[],r=0;for(;r<e.length;){let n=rr.decode(e,r),o=rr.decode.bytes,s=Qo(n),i=Sc(s,e.slice(r+o));if(i===0){t.push([n]),r+=o;continue}let a=e.slice(r+o,r+o+i);if(r+=i+o,r>e.length)throw es("Invalid address Uint8Array: "+Qy(e,"base16"));t.push([n,a])}return t}function Zy(e){let t=Zo(e),r=Ec(t);return bc(r)}function Cc(e){e=Yr(e);let t=wc(e),r=Dc(t);return xc(r)}function Yy(e){return Cc(e)}function Tc(e){let t=Yo(e);if(t)throw t;return Uint8Array.from(e)}function Yo(e){try{Zo(e)}catch(t){return t}}function eg(e){return Yo(e)===void 0}function Yr(e){return"/"+e.trim().split("/").filter(t=>t).join("/")}function es(e){return new Error("Error parsing address: "+e)}function nr(e){return Qo(e[0])}});var ie=D((O1,Bc)=>{"use strict";function vc(e,t){for(let r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}function tg(e,t,r){if(!e||typeof e=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof t=="object"&&(r=t,t=""),t&&(r.code=t);try{return vc(e,r)}catch{r.message=e.message,r.stack=e.stack;let o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(e)),vc(new o,r)}}Bc.exports=tg});var Uc={};I(Uc,{equals:()=>rg});function rg(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}var kc=S(()=>{});var Q=D((R1,Nc)=>{"use strict";var Se=Ac(),Pt=Kr(),Ic=Nn(),{CID:ng}=(C(),V(Tr)),{base58btc:og}=(zt(),V(jt)),sg=ie(),ig=Symbol.for("nodejs.util.inspect.custom"),{toString:en}=(He(),V(er)),{equals:ag}=(kc(),V(Uc)),ts=new Map,_c=Symbol.for("@multiformats/js-multiaddr/multiaddr"),At=class e{constructor(t){if(t==null&&(t=""),Object.defineProperty(this,_c,{value:!0}),t instanceof Uint8Array)this.bytes=Se.fromBytes(t);else if(typeof t=="string"){if(t.length>0&&t.charAt(0)!=="/")throw new Error(`multiaddr "${t}" must start with a "/"`);this.bytes=Se.fromString(t)}else if(e.isMultiaddr(t))this.bytes=Se.fromBytes(t.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return Se.bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){let t={},r=this.toString().split("/");return t.family=r[1]==="ip4"?4:6,t.host=r[2],t.transport=r[3],t.port=parseInt(r[4]),t}protos(){return this.protoCodes().map(t=>Object.assign({},Pt(t)))}protoCodes(){let t=[],r=this.bytes,n=0;for(;n<r.length;){let o=Ic.decode(r,n),s=Ic.decode.bytes,i=Pt(o),a=Se.sizeForAddr(i,r.slice(n+s));n+=a+s,t.push(o)}return t}protoNames(){return this.protos().map(t=>t.name)}tuples(){return Se.bytesToTuples(this.bytes)}stringTuples(){let t=Se.bytesToTuples(this.bytes);return Se.tuplesToStringTuples(t)}encapsulate(t){return t=new e(t),new e(this.toString()+t.toString())}decapsulate(t){let r=t.toString(),n=this.toString(),o=n.lastIndexOf(r);if(o<0)throw new Error("Address "+this+" does not contain subaddress: "+t);return new e(n.slice(0,o))}decapsulateCode(t){let r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===t)return new e(Se.tuplesToBytes(r.slice(0,n)));return this}getPeerId(){try{let r=this.stringTuples().filter(n=>n[0]===Pt.names.ipfs.code).pop();if(r&&r[1]){let n=r[1];return n[0]==="Q"||n[0]==="1"?en(og.decode(`z${n}`),"base58btc"):en(ng.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let t=null;try{t=this.stringTuples().filter(r=>!!Pt(r[0]).path)[0][1],t||(t=null)}catch{t=null}return t}equals(t){return ag(this.bytes,t.bytes)}async resolve(){let t=this.protos().find(o=>o.resolvable);if(!t)return[this];let r=ts.get(t.name);if(!r)throw sg(new Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await r(this)).map(o=>new e(o))}nodeAddress(){let t=this.protoCodes(),r=this.protoNames(),n=this.toString().split("/").slice(1);if(n.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(t[0]!==4&&t[0]!==41&&t[0]!==54&&t[0]!==55)throw new Error(`no protocol with name: "'${r[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if(n[2]!=="tcp"&&n[2]!=="udp")throw new Error(`no protocol with name: "'${r[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:t[0]===41||t[0]===55?6:4,address:n[1],port:parseInt(n[3])}}isThinWaistAddress(t){let r=(t||this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}static fromNodeAddress(t,r){if(!t)throw new Error("requires node address object");if(!r)throw new Error("requires transport protocol");let n;switch(t.family){case 4:n="ip4";break;case 6:n="ip6";break;default:throw Error(`Invalid addr family. Got '${t.family}' instead of 4 or 6`)}return new e("/"+[n,t.address,r,t.port].join("/"))}static isName(t){return e.isMultiaddr(t)?t.protos().some(r=>r.resolvable):!1}static isMultiaddr(t){return t instanceof e||!!(t&&t[_c])}[ig](){return"<Multiaddr "+en(this.bytes,"base16")+" - "+Se.bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+en(this.bytes,"base16")+" - "+Se.bytesToString(this.bytes)+">"}};At.protocols=Pt;At.resolvers=ts;function cg(e){return new At(e)}Nc.exports={Multiaddr:At,multiaddr:cg,protocols:Pt,resolvers:ts}});var Rc=D((L1,Oc)=>{function ug(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}Oc.exports=ug});var rs=D(($1,Lc)=>{"use strict";var fg=Rc(),tn=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,or=fg(),lg=tn&&!or,pg=or&&!tn,dg=or&&tn,mg=typeof $s=="function"&&typeof process<"u"&&typeof process.release<"u"&&process.release.name==="node"&&!or,hg=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,yg=typeof process<"u"&&typeof process.env<"u"&&!1,gg=typeof navigator<"u"&&navigator.product==="ReactNative";Lc.exports={isTest:yg,isElectron:or,isElectronMain:pg,isElectronRenderer:dg,isNode:mg,isBrowser:lg,isWebWorker:hg,isEnvWithDom:tn,isReactNative:gg}});var zc=D((z1,jc)=>{var vt=1e3,Bt=vt*60,Ut=Bt*60,tt=Ut*24,bg=tt*7,Dg=tt*365.25;jc.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return Eg(e);if(r==="number"&&isFinite(e))return t.long?Sg(e):xg(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Eg(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Dg;case"weeks":case"week":case"w":return r*bg;case"days":case"day":case"d":return r*tt;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Ut;case"minutes":case"minute":case"mins":case"min":case"m":return r*Bt;case"seconds":case"second":case"secs":case"sec":case"s":return r*vt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function xg(e){var t=Math.abs(e);return t>=tt?Math.round(e/tt)+"d":t>=Ut?Math.round(e/Ut)+"h":t>=Bt?Math.round(e/Bt)+"m":t>=vt?Math.round(e/vt)+"s":e+"ms"}function Sg(e){var t=Math.abs(e);return t>=tt?rn(e,t,tt,"day"):t>=Ut?rn(e,t,Ut,"hour"):t>=Bt?rn(e,t,Bt,"minute"):t>=vt?rn(e,t,vt,"second"):e+" ms"}function rn(e,t,r,n){var o=t>=r*1.5;return Math.round(e/r)+" "+n+(o?"s":"")}});var qc=D((M1,Mc)=>{function Cg(e){r.debug=r,r.default=r,r.coerce=l,r.disable=s,r.enable=o,r.enabled=i,r.humanize=zc(),r.destroy=h,Object.keys(e).forEach(d=>{r[d]=e[d]}),r.names=[],r.skips=[],r.formatters={};function t(d){let y=0;for(let P=0;P<d.length;P++)y=(y<<5)-y+d.charCodeAt(P),y|=0;return r.colors[Math.abs(y)%r.colors.length]}r.selectColor=t;function r(d){let y,P=null,N,v;function k(..._){if(!k.enabled)return;let z=k,K=Number(new Date),ce=K-(y||K);z.diff=ce,z.prev=y,z.curr=K,y=K,_[0]=r.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let H=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(ue,ee)=>{if(ue==="%%")return"%";H++;let fe=r.formatters[ee];if(typeof fe=="function"){let ct=_[H];ue=fe.call(z,ct),_.splice(H,1),H--}return ue}),r.formatArgs.call(z,_),(z.log||r.log).apply(z,_)}return k.namespace=d,k.useColors=r.useColors(),k.color=r.selectColor(d),k.extend=n,k.destroy=r.destroy,Object.defineProperty(k,"enabled",{enumerable:!0,configurable:!1,get:()=>P!==null?P:(N!==r.namespaces&&(N=r.namespaces,v=r.enabled(d)),v),set:_=>{P=_}}),typeof r.init=="function"&&r.init(k),k}function n(d,y){let P=r(this.namespace+(typeof y>"u"?":":y)+d);return P.log=this.log,P}function o(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let y,P=(typeof d=="string"?d:"").split(/[\s,]+/),N=P.length;for(y=0;y<N;y++)P[y]&&(d=P[y].replace(/\*/g,".*?"),d[0]==="-"?r.skips.push(new RegExp("^"+d.slice(1)+"$")):r.names.push(new RegExp("^"+d+"$")))}function s(){let d=[...r.names.map(a),...r.skips.map(a).map(y=>"-"+y)].join(",");return r.enable(""),d}function i(d){if(d[d.length-1]==="*")return!0;let y,P;for(y=0,P=r.skips.length;y<P;y++)if(r.skips[y].test(d))return!1;for(y=0,P=r.names.length;y<P;y++)if(r.names[y].test(d))return!0;return!1}function a(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function l(d){return d instanceof Error?d.stack||d.message:d}function h(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Mc.exports=Cg});var ns=D((ae,nn)=>{ae.formatArgs=Pg;ae.save=Ag;ae.load=vg;ae.useColors=Tg;ae.storage=Bg();ae.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ae.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Tg(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Pg(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+nn.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(r++,o==="%c"&&(n=r))}),e.splice(n,0,t)}ae.log=console.debug||console.log||(()=>{});function Ag(e){try{e?ae.storage.setItem("debug",e):ae.storage.removeItem("debug")}catch{}}function vg(){let e;try{e=ae.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function Bg(){try{return localStorage}catch{}}nn.exports=qc()(ae);var{formatters:Ug}=nn.exports;Ug.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var as=D(on=>{"use strict";var os=class extends Error{constructor(t="Request timed out"){super(t),this.name="TimeoutError"}};on.TimeoutError=os;var ss=class extends Error{constructor(t="The operation was aborted."){super(t),this.name="AbortError"}};on.AbortError=ss;var is=class extends Error{constructor(t){super(t.statusText),this.name="HTTPError",this.response=t}};on.HTTPError=is});var sr=D((kt,Hc)=>{"use strict";var kg=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},rt=kg();Hc.exports=kt=rt.fetch;rt.fetch&&(kt.default=rt.fetch.bind(rt));kt.Headers=rt.Headers;kt.Request=rt.Request;kt.Response=rt.Response});var Vc=D((H1,cs)=>{"use strict";globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?cs.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:cs.exports={default:sr().default,Headers:sr().Headers,Request:sr().Request,Response:sr().Response}});var Wc=D((V1,Gc)=>{"use strict";Gc.exports=Vc()});var Xc=D((G1,Kc)=>{"use strict";var{TimeoutError:Ig,AbortError:_g}=as(),{Response:Jc,Request:Ng,Headers:fs,default:Og}=Wc(),Rg=(e,t={})=>{let r=new XMLHttpRequest;r.open(t.method||"GET",e.toString(),!0);let{timeout:n,headers:o}=t;if(n&&n>0&&n<1/0&&(r.timeout=n),t.overrideMimeType!=null&&r.overrideMimeType(t.overrideMimeType),o)for(let[s,i]of new fs(o))r.setRequestHeader(s,i);return t.signal&&(t.signal.onabort=()=>r.abort()),t.onUploadProgress&&(r.upload.onprogress=t.onUploadProgress),r.responseType="arraybuffer",new Promise((s,i)=>{let a=l=>{switch(l.type){case"error":{s(Jc.error());break}case"load":{s(new us(r.responseURL,r.response,{status:r.status,statusText:r.statusText,headers:Fg(r.getAllResponseHeaders())}));break}case"timeout":{i(new Ig);break}case"abort":{i(new _g);break}default:break}};r.onerror=a,r.onload=a,r.ontimeout=a,r.onabort=a,r.send(t.body)})},Lg=Og,$g=(e,t={})=>t.onUploadProgress!=null?Rg(e,t):Lg(e,t),Fg=e=>{let t=new fs;for(let r of e.trim().split(/[\r\n]+/)){let n=r.indexOf(": ");n>0&&t.set(r.slice(0,n),r.slice(n+1))}return t},us=class extends Jc{constructor(t,r,n){super(r,n),Object.defineProperty(this,"url",{value:t})}};Kc.exports={fetch:$g,Request:Ng,Headers:fs}});var Zc=D((W1,Qc)=>{"use strict";Qc.exports=e=>{if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}});var ps=D((ru,nu)=>{"use strict";var sn=Zc(),{hasOwnProperty:eu}=Object.prototype,{propertyIsEnumerable:jg}=Object,It=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0}),zg=ru,Yc={concatArrays:!1,ignoreUndefined:!1},an=e=>{let t=[];for(let r in e)eu.call(e,r)&&t.push(r);if(Object.getOwnPropertySymbols){let r=Object.getOwnPropertySymbols(e);for(let n of r)jg.call(e,n)&&t.push(n)}return t};function _t(e){return Array.isArray(e)?Mg(e):sn(e)?qg(e):e}function Mg(e){let t=e.slice(0,0);return an(e).forEach(r=>{It(t,r,_t(e[r]))}),t}function qg(e){let t=Object.getPrototypeOf(e)===null?Object.create(null):{};return an(e).forEach(r=>{It(t,r,_t(e[r]))}),t}var tu=(e,t,r,n)=>(r.forEach(o=>{typeof t[o]>"u"&&n.ignoreUndefined||(o in e&&e[o]!==Object.getPrototypeOf(e)?It(e,o,ls(e[o],t[o],n)):It(e,o,_t(t[o])))}),e),Hg=(e,t,r)=>{let n=e.slice(0,0),o=0;return[e,t].forEach(s=>{let i=[];for(let a=0;a<s.length;a++)eu.call(s,a)&&(i.push(String(a)),s===e?It(n,o++,s[a]):It(n,o++,_t(s[a])));n=tu(n,s,an(s).filter(a=>!i.includes(a)),r)}),n};function ls(e,t,r){return r.concatArrays&&Array.isArray(e)&&Array.isArray(t)?Hg(e,t,r):!sn(t)||!sn(e)?_t(t):tu(e,t,an(t),r)}nu.exports=function(...e){let t=ls(_t(Yc),this!==zg&&this||{},Yc),r={_:{}};for(let n of e)if(n!==void 0){if(!sn(n))throw new TypeError("`"+n+"` is not an Option Object");r=ls(r,{_:n},t)}return r._}});var ms=D((J1,su)=>{"use strict";var Vg=typeof navigator<"u"&&navigator.product==="ReactNative";function Gg(){return Vg?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}var ir=self.URL,ou=Gg(),ds=class{constructor(t="",r=ou){this.super=new ir(t,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(t){this.super.hash=t}set host(t){this.super.host=t}set hostname(t){this.super.hostname=t}set href(t){this.super.href=t}set password(t){this.super.password=t}set pathname(t){this.super.pathname=t}set port(t){this.super.port=t}set protocol(t){this.super.protocol=t}set search(t){this.super.search=t}set username(t){this.super.username=t}static createObjectURL(t){return ir.createObjectURL(t)}static revokeObjectURL(t){ir.revokeObjectURL(t)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function Wg(e){if(typeof e=="string")return new ir(e).toString();if(!(e instanceof ir)){let t=e.username&&e.password?`${e.username}:${e.password}@`:"",r=e.auth?e.auth+"@":"",n=e.port?":"+e.port:"",o=e.protocol?e.protocol+"//":"",s=e.host||"",i=e.hostname||"",a=e.search||(e.query?"?"+e.query:""),l=e.hash||"",h=e.pathname||"",d=e.path||h+a;return`${o}${t||r}${s||i+n}${d}${l}`}}su.exports={URLWithLegacySupport:ds,URLSearchParams:self.URLSearchParams,defaultBase:ou,format:Wg}});var cu=D((K1,au)=>{"use strict";var{URLWithLegacySupport:iu,format:Jg}=ms();au.exports=(e,t={},r={},n)=>{let o=t.protocol?t.protocol.replace(":",""):"http";o=(r[o]||n||o)+":";let s;try{s=new iu(e)}catch{s={}}let i=Object.assign({},t,{protocol:o||s.protocol,host:t.host||s.host});return new iu(e,Jg(i)).toString()}});var fu=D((X1,uu)=>{"use strict";var{URLWithLegacySupport:Kg,format:Xg,URLSearchParams:Qg,defaultBase:Zg}=ms(),Yg=cu();uu.exports={URL:Kg,URLSearchParams:Qg,format:Xg,relative:Yg,defaultBase:Zg}});var ys=D((Q1,hs)=>{function lu(e){let t=new globalThis.AbortController;function r(){t.abort();for(let n of e)!n||!n.removeEventListener||n.removeEventListener("abort",r)}for(let n of e)if(!(!n||!n.addEventListener)){if(n.aborted){r();break}n.addEventListener("abort",r)}return t.signal}hs.exports=lu;hs.exports.anySignal=lu});var ar=D((Z1,pu)=>{"use strict";async function*ew(e,t={}){let r=e.getReader();try{for(;;){let n=await r.read();if(n.done)return;yield n.value}}finally{t.preventCancel!==!0&&r.cancel(),r.releaseLock()}}pu.exports=ew});var gs=D((Y1,du)=>{"use strict";var tw=async e=>{let t=[];for await(let r of e)t.push(r);return t};du.exports=tw});var cn=D((e0,bu)=>{"use strict";var{fetch:rw,Request:nw,Headers:ow}=Xc(),{TimeoutError:ws,HTTPError:gu}=as(),mu=ps().bind({ignoreUndefined:!0}),{URL:hu,URLSearchParams:yu}=fu(),sw=ys(),iw=ar(),{isBrowser:aw,isWebWorker:cw}=rs(),uw=gs(),fw=(e,t,r)=>{if(t===void 0)return e;let n=Date.now(),o=()=>Date.now()-n>=t;return new Promise((s,i)=>{let a=setTimeout(()=>{o()&&(i(new ws),r.abort())},t),l=h=>y=>{if(clearTimeout(a),o()){i(new ws);return}h(y)};e.then(l(s),l(i))})},lw={throwHttpErrors:!0,credentials:"same-origin"},J=class{constructor(t={}){this.opts=mu(lw,t)}async fetch(t,r={}){let n=mu(this.opts,r),o=new ow(n.headers);if(typeof t!="string"&&!(t instanceof hu||t instanceof nw))throw new TypeError("`resource` must be a string, URL, or Request");let s=new hu(t.toString(),n.base),{searchParams:i,transformSearchParams:a,json:l}=n;i&&(typeof a=="function"?s.search=a(new yu(n.searchParams)):s.search=new yu(n.searchParams)),l&&(n.body=JSON.stringify(n.json),o.set("content-type","application/json"));let h=new AbortController,d=sw([h.signal,n.signal]);globalThis.ReadableStream!=null&&n.body instanceof globalThis.ReadableStream&&(aw||cw)&&(n.body=new Blob(await uw(iw(n.body))));let y=await fw(rw(s.toString(),{...n,signal:d,timeout:void 0,headers:o,duplex:"half"}),n.timeout,h);if(!y.ok&&n.throwHttpErrors)throw n.handleError&&await n.handleError(y),new gu(y);return y.iterator=async function*(){yield*wu(y.body)},y.ndjson=async function*(){for await(let P of pw(y.iterator()))r.transform?yield r.transform(P):yield P},y}post(t,r={}){return this.fetch(t,{...r,method:"POST"})}get(t,r={}){return this.fetch(t,{...r,method:"GET"})}put(t,r={}){return this.fetch(t,{...r,method:"PUT"})}delete(t,r={}){return this.fetch(t,{...r,method:"DELETE"})}options(t,r={}){return this.fetch(t,{...r,method:"OPTIONS"})}},pw=async function*(e){let t=new TextDecoder,r="";for await(let n of e){r+=t.decode(n,{stream:!0});let o=r.split(/\r?\n/);for(let s=0;s<o.length-1;s++){let i=o[s].trim();i.length>0&&(yield JSON.parse(i))}r=o[o.length-1]}r+=t.decode(),r=r.trim(),r.length!==0&&(yield JSON.parse(r))},wu=e=>{if(dw(e))return e;if(hw(e)){let t=e[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:t.next.bind(t),return(r){return e.destroy(),typeof t.return=="function"?t.return():Promise.resolve({done:!0,value:r})}}}}}if(mw(e)){let t=e.getReader();return async function*(){try{for(;;){let{done:r,value:n}=await t.read();if(r)return;n&&(yield n)}}finally{t.releaseLock()}}()}throw new TypeError("Body can't be converted to AsyncIterable")},dw=e=>typeof e=="object"&&e!==null&&typeof e[Symbol.asyncIterator]=="function",mw=e=>e&&typeof e.getReader=="function",hw=e=>Object.prototype.hasOwnProperty.call(e,"readable")&&Object.prototype.hasOwnProperty.call(e,"writable");J.HTTPError=gu;J.TimeoutError=ws;J.streamToAsyncIterator=wu;J.post=(e,t)=>new J(t).post(e,t);J.get=(e,t)=>new J(t).get(e,t);J.put=(e,t)=>new J(t).put(e,t);J.delete=(e,t)=>new J(t).delete(e,t);J.options=(e,t)=>new J(t).options(e,t);bu.exports=J});var Su=D((r0,xu)=>{var{Multiaddr:yw}=Q(),un=(e,t)=>t,gw=(e,t,r,n)=>{if(n&&n.assumeHttp===!1)return`tcp://${e}:${t}`;let o="tcp",s=`:${t}`;return r[r.length-1].protocol==="tcp"&&(o=t==="443"?"https":"http",s=t==="443"||t==="80"?"":s),`${o}://${e}${s}`},ww={ip4:un,ip6:(e,t,r,n)=>n.length===1&&n[0].protocol==="ip6"?t:`[${t}]`,tcp:(e,t,r,n,o)=>n.some(s=>["http","https","ws","wss"].includes(s.protocol))?`${e}:${t}`:gw(e,t,n,o),udp:(e,t)=>`udp://${e}:${t}`,dnsaddr:un,dns4:un,dns6:un,ipfs:(e,t)=>`${e}/ipfs/${t}`,p2p:(e,t)=>`${e}/p2p/${t}`,http:e=>`http://${e}`,https:e=>`https://${e}`,ws:e=>`ws://${e}`,wss:e=>`wss://${e}`,"p2p-websocket-star":e=>`${e}/p2p-websocket-star`,"p2p-webrtc-star":e=>`${e}/p2p-webrtc-star`,"p2p-webrtc-direct":e=>`${e}/p2p-webrtc-direct`};xu.exports=(e,t)=>{let r=new yw(e),n=e.toString().split("/").slice(1);return r.tuples().map(o=>({protocol:n.shift(),content:o[1]?n.shift():null})).reduce((o,s,i,a)=>{let l=ww[s.protocol];if(!l)throw new Error(`Unsupported protocol ${s.protocol}`);return l(o,s.content,i,a,t)},"")}});var mn=D((z0,Ou)=>{"use strict";function vw(e){let[t,r]=e[Symbol.asyncIterator]?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>t.next(),push:o=>{n.push(o)},next:()=>n.length?{done:!1,value:n.shift()}:t.next(),[r](){return this}}}Ou.exports=vw});var Mu=D((V0,zu)=>{"use strict";var Bw=async function*(e,t){for await(let r of e)yield t(r)};zu.exports=Bw});var Hu=D((G0,qu)=>{"use strict";qu.exports=q;var ur=We();function q(e,t){this.lo=e>>>0,this.hi=t>>>0}var it=q.zero=new q(0,0);it.toNumber=function(){return 0};it.zzEncode=it.zzDecode=function(){return this};it.length=function(){return 1};var Uw=q.zeroHash="\0\0\0\0\0\0\0\0";q.fromNumber=function(t){if(t===0)return it;var r=t<0;r&&(t=-t);var n=t>>>0,o=(t-n)/4294967296>>>0;return r&&(o=~o>>>0,n=~n>>>0,++n>4294967295&&(n=0,++o>4294967295&&(o=0))),new q(n,o)};q.from=function(t){if(typeof t=="number")return q.fromNumber(t);if(ur.isString(t))if(ur.Long)t=ur.Long.fromString(t);else return q.fromNumber(parseInt(t,10));return t.low||t.high?new q(t.low>>>0,t.high>>>0):it};q.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};q.prototype.toLong=function(t){return ur.Long?new ur.Long(this.lo|0,this.hi|0,!!t):{low:this.lo|0,high:this.hi|0,unsigned:!!t}};var Ge=String.prototype.charCodeAt;q.fromHash=function(t){return t===Uw?it:new q((Ge.call(t,0)|Ge.call(t,1)<<8|Ge.call(t,2)<<16|Ge.call(t,3)<<24)>>>0,(Ge.call(t,4)|Ge.call(t,5)<<8|Ge.call(t,6)<<16|Ge.call(t,7)<<24)>>>0)};q.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};q.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this};q.prototype.zzDecode=function(){var t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this};q.prototype.length=function(){var t=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?t<16384?t<128?1:2:t<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}});var We=D(Es=>{"use strict";var b=Es;b.asPromise=Bd();b.base64=Ud();b.EventEmitter=kd();b.float=Id();b.inquire=_d();b.utf8=Nd();b.pool=Od();b.LongBits=Hu();b.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node);b.global=b.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||Es;b.emptyArray=Object.freeze?Object.freeze([]):[];b.emptyObject=Object.freeze?Object.freeze({}):{};b.isInteger=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};b.isString=function(t){return typeof t=="string"||t instanceof String};b.isObject=function(t){return t&&typeof t=="object"};b.isset=b.isSet=function(t,r){var n=t[r];return n!=null&&t.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};b.Buffer=function(){try{var e=b.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch{return null}}();b._Buffer_from=null;b._Buffer_allocUnsafe=null;b.newBuffer=function(t){return typeof t=="number"?b.Buffer?b._Buffer_allocUnsafe(t):new b.Array(t):b.Buffer?b._Buffer_from(t):typeof Uint8Array>"u"?t:new Uint8Array(t)};b.Array=typeof Uint8Array<"u"?Uint8Array:Array;b.Long=b.global.dcodeIO&&b.global.dcodeIO.Long||b.global.Long||b.inquire("long");b.key2Re=/^true|false|0|1$/;b.key32Re=/^-?(?:0|[1-9][0-9]*)$/;b.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;b.longToHash=function(t){return t?b.LongBits.from(t).toHash():b.LongBits.zeroHash};b.longFromHash=function(t,r){var n=b.LongBits.fromHash(t);return b.Long?b.Long.fromBits(n.lo,n.hi,r):n.toNumber(!!r)};function Vu(e,t,r){for(var n=Object.keys(t),o=0;o<n.length;++o)(e[n[o]]===void 0||!r)&&(e[n[o]]=t[n[o]]);return e}b.merge=Vu;b.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)};function Gu(e){function t(r,n){if(!(this instanceof t))return new t(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&Vu(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}b.newError=Gu;b.ProtocolError=Gu("ProtocolError");b.oneOfGetter=function(t){for(var r={},n=0;n<t.length;++n)r[t[n]]=1;return function(){for(var o=Object.keys(this),s=o.length-1;s>-1;--s)if(r[o[s]]===1&&this[o[s]]!==void 0&&this[o[s]]!==null)return o[s]}};b.oneOfSetter=function(t){return function(r){for(var n=0;n<t.length;++n)t[n]!==r&&delete this[t[n]]}};b.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};b._configure=function(){var e=b.Buffer;if(!e){b._Buffer_from=b._Buffer_allocUnsafe=null;return}b._Buffer_from=e.from!==Uint8Array.from&&e.from||function(r,n){return new e(r,n)},b._Buffer_allocUnsafe=e.allocUnsafe||function(r){return new e(r)}}});var vs=D((J0,Xu)=>{"use strict";Xu.exports=B;var he=We(),xs,yn=he.LongBits,Wu=he.base64,Ju=he.utf8;function fr(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function Cs(){}function kw(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function B(){this.len=0,this.head=new fr(Cs,0,0),this.tail=this.head,this.states=null}var Ku=function(){return he.Buffer?function(){return(B.create=function(){return new xs})()}:function(){return new B}};B.create=Ku();B.alloc=function(t){return new he.Array(t)};he.Array!==Array&&(B.alloc=he.pool(B.alloc,he.Array.prototype.subarray));B.prototype._push=function(t,r,n){return this.tail=this.tail.next=new fr(t,r,n),this.len+=r,this};function Ts(e,t,r){t[r]=e&255}function Iw(e,t,r){for(;e>127;)t[r++]=e&127|128,e>>>=7;t[r]=e}function Ps(e,t){this.len=e,this.next=void 0,this.val=t}Ps.prototype=Object.create(fr.prototype);Ps.prototype.fn=Iw;B.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new Ps((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this};B.prototype.int32=function(t){return t<0?this._push(As,10,yn.fromNumber(t)):this.uint32(t)};B.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)};function As(e,t,r){for(;e.hi;)t[r++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=e.lo&127|128,e.lo=e.lo>>>7;t[r++]=e.lo}B.prototype.uint64=function(t){var r=yn.from(t);return this._push(As,r.length(),r)};B.prototype.int64=B.prototype.uint64;B.prototype.sint64=function(t){var r=yn.from(t).zzEncode();return this._push(As,r.length(),r)};B.prototype.bool=function(t){return this._push(Ts,1,t?1:0)};function Ss(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}B.prototype.fixed32=function(t){return this._push(Ss,4,t>>>0)};B.prototype.sfixed32=B.prototype.fixed32;B.prototype.fixed64=function(t){var r=yn.from(t);return this._push(Ss,4,r.lo)._push(Ss,4,r.hi)};B.prototype.sfixed64=B.prototype.fixed64;B.prototype.float=function(t){return this._push(he.float.writeFloatLE,4,t)};B.prototype.double=function(t){return this._push(he.float.writeDoubleLE,8,t)};var _w=he.Array.prototype.set?function(t,r,n){r.set(t,n)}:function(t,r,n){for(var o=0;o<t.length;++o)r[n+o]=t[o]};B.prototype.bytes=function(t){var r=t.length>>>0;if(!r)return this._push(Ts,1,0);if(he.isString(t)){var n=B.alloc(r=Wu.length(t));Wu.decode(t,n,0),t=n}return this.uint32(r)._push(_w,r,t)};B.prototype.string=function(t){var r=Ju.length(t);return r?this.uint32(r)._push(Ju.write,r,t):this._push(Ts,1,0)};B.prototype.fork=function(){return this.states=new kw(this),this.head=this.tail=new fr(Cs,0,0),this.len=0,this};B.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new fr(Cs,0,0),this.len=0),this};B.prototype.ldelim=function(){var t=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=r,this.len+=n),this};B.prototype.finish=function(){for(var t=this.head.next,r=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,r,n),n+=t.len,t=t.next;return r};B._configure=function(e){xs=e,B.create=Ku(),xs._configure()}});var Yu=D((K0,Zu)=>{"use strict";Zu.exports=Ue;var Qu=vs();(Ue.prototype=Object.create(Qu.prototype)).constructor=Ue;var Je=We();function Ue(){Qu.call(this)}Ue._configure=function(){Ue.alloc=Je._Buffer_allocUnsafe,Ue.writeBytesBuffer=Je.Buffer&&Je.Buffer.prototype instanceof Uint8Array&&Je.Buffer.prototype.set.name==="set"?function(t,r,n){r.set(t,n)}:function(t,r,n){if(t.copy)t.copy(r,n,0,t.length);else for(var o=0;o<t.length;)r[n++]=t[o++]}};Ue.prototype.bytes=function(t){Je.isString(t)&&(t=Je._Buffer_from(t,"base64"));var r=t.length>>>0;return this.uint32(r),r&&this._push(Ue.writeBytesBuffer,r,t),this};function Nw(e,t,r){e.length<40?Je.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}Ue.prototype.string=function(t){var r=Je.Buffer.byteLength(t);return this.uint32(r),r&&this._push(Nw,r,t),this};Ue._configure()});var ks=D((X0,of)=>{"use strict";of.exports=R;var ke=We(),Us,rf=ke.LongBits,Ow=ke.utf8;function Ce(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function R(e){this.buf=e,this.pos=0,this.len=e.length}var ef=typeof Uint8Array<"u"?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new R(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new R(t);throw Error("illegal buffer")},nf=function(){return ke.Buffer?function(r){return(R.create=function(o){return ke.Buffer.isBuffer(o)?new Us(o):ef(o)})(r)}:ef};R.create=nf();R.prototype._slice=ke.Array.prototype.subarray||ke.Array.prototype.slice;R.prototype.uint32=function(){var t=4294967295;return function(){if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,Ce(this,10);return t}}();R.prototype.int32=function(){return this.uint32()|0};R.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(t&1)|0};function Bs(){var e=new rf(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw Ce(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,e}if(this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw Ce(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}R.prototype.bool=function(){return this.uint32()!==0};function gn(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}R.prototype.fixed32=function(){if(this.pos+4>this.len)throw Ce(this,4);return gn(this.buf,this.pos+=4)};R.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Ce(this,4);return gn(this.buf,this.pos+=4)|0};function tf(){if(this.pos+8>this.len)throw Ce(this,8);return new rf(gn(this.buf,this.pos+=4),gn(this.buf,this.pos+=4))}R.prototype.float=function(){if(this.pos+4>this.len)throw Ce(this,4);var t=ke.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t};R.prototype.double=function(){if(this.pos+8>this.len)throw Ce(this,4);var t=ke.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t};R.prototype.bytes=function(){var t=this.uint32(),r=this.pos,n=this.pos+t;if(n>this.len)throw Ce(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(r,n):r===n?new this.buf.constructor(0):this._slice.call(this.buf,r,n)};R.prototype.string=function(){var t=this.bytes();return Ow.read(t,0,t.length)};R.prototype.skip=function(t){if(typeof t=="number"){if(this.pos+t>this.len)throw Ce(this,t);this.pos+=t}else do if(this.pos>=this.len)throw Ce(this);while(this.buf[this.pos++]&128);return this};R.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};R._configure=function(e){Us=e,R.create=nf(),Us._configure();var t=ke.Long?"toLong":"toNumber";ke.merge(R.prototype,{int64:function(){return Bs.call(this)[t](!1)},uint64:function(){return Bs.call(this)[t](!0)},sint64:function(){return Bs.call(this).zzDecode()[t](!1)},fixed64:function(){return tf.call(this)[t](!0)},sfixed64:function(){return tf.call(this)[t](!1)}})}});var uf=D((Q0,cf)=>{"use strict";cf.exports=at;var af=ks();(at.prototype=Object.create(af.prototype)).constructor=at;var sf=We();function at(e){af.call(this,e)}at._configure=function(){sf.Buffer&&(at.prototype._slice=sf.Buffer.prototype.slice)};at.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))};at._configure()});var lf=D((Z0,ff)=>{"use strict";ff.exports=lr;var Is=We();(lr.prototype=Object.create(Is.EventEmitter.prototype)).constructor=lr;function lr(e,t,r){if(typeof e!="function")throw TypeError("rpcImpl must be a function");Is.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!t,this.responseDelimited=!!r}lr.prototype.rpcCall=function e(t,r,n,o,s){if(!o)throw TypeError("request must be specified");var i=this;if(!s)return Is.asPromise(e,i,t,r,n,o);if(!i.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return i.rpcImpl(t,r[i.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(l,h){if(l)return i.emit("error",l,t),s(l);if(h===null){i.end(!0);return}if(!(h instanceof n))try{h=n[i.responseDelimited?"decodeDelimited":"decode"](h)}catch(d){return i.emit("error",d,t),s(d)}return i.emit("data",h,t),s(null,h)})}catch(a){i.emit("error",a,t),setTimeout(function(){s(a)},0);return}};lr.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var df=D(pf=>{"use strict";var Rw=pf;Rw.Service=lf()});var hf=D((e8,mf)=>{"use strict";mf.exports={}});var wf=D(gf=>{"use strict";var Y=gf;Y.build="minimal";Y.Writer=vs();Y.BufferWriter=Yu();Y.Reader=ks();Y.BufferReader=uf();Y.util=We();Y.rpc=df();Y.roots=hf();Y.configure=yf;function yf(){Y.util._configure(),Y.Writer._configure(Y.BufferWriter),Y.Reader._configure(Y.BufferReader)}yf()});var Df=D((r8,bf)=>{"use strict";bf.exports=wf()});var Yf=D((M3,Zf)=>{"use strict";var Mw=async e=>{for await(let t of e)return t};Zf.exports=Mw});var dr=D((q3,el)=>{"use strict";var qw=async e=>{let t;for await(let r of e)t=r;return t};el.exports=qw});var Al=D(($2,Pl)=>{Pl.exports=e=>{if(e[Symbol.asyncIterator])return e;if(e.getReader)return async function*(){let t=e.getReader();try{for(;;){let{done:r,value:n}=await t.read();if(r)return;yield n}}finally{t.releaseLock()}}();throw new Error("unknown stream")}});var Td=D(()=>{});var Ad=D((I4,Pd)=>{"use strict";var cb=cn(),ub=(e,t)=>({path:decodeURIComponent(new URL(e).pathname.split("/").pop()||""),content:fb(e,t)});async function*fb(e,t){yield*(await new cb().get(e,t)).iterator()}Pd.exports=ub});var Rd=e=>Promise.reject(new Error(`No base found for "${e}"`)),yr=class{constructor(t){this._basesByName={},this._basesByPrefix={},this._loadBase=t.loadBase||Rd;for(let r of t.bases)this.addBase(r)}addBase(t){if(this._basesByName[t.name]||this._basesByPrefix[t.prefix])throw new Error(`Codec already exists for codec "${t.name}"`);this._basesByName[t.name]=t,this._basesByPrefix[t.prefix]=t}removeBase(t){delete this._basesByName[t.name],delete this._basesByPrefix[t.prefix]}async getBase(t){if(this._basesByName[t])return this._basesByName[t];if(this._basesByPrefix[t])return this._basesByPrefix[t];let r=await this._loadBase(t);return this._basesByName[r.name]==null&&this._basesByPrefix[r.prefix]==null&&this.addBase(r),r}listBases(){return Object.values(this._basesByName)}};var Ld=e=>Promise.reject(new Error(`No codec found for "${e}"`)),gr=class{constructor(t){this._codecsByName={},this._codecsByCode={},this._loadCodec=t.loadCodec||Ld;for(let r of t.codecs)this.addCodec(r)}addCodec(t){if(this._codecsByName[t.name]||this._codecsByCode[t.code])throw new Error(`Resolver already exists for codec "${t.name}"`);this._codecsByName[t.name]=t,this._codecsByCode[t.code]=t}removeCodec(t){delete this._codecsByName[t.name],delete this._codecsByCode[t.code]}async getCodec(t){let r=typeof t=="string"?this._codecsByName:this._codecsByCode;if(r[t])return r[t];let n=await this._loadCodec(t);return r[t]==null&&this.addCodec(n),n}listCodecs(){return Object.values(this._codecsByName)}};var $d=e=>Promise.reject(new Error(`No hasher found for "${e}"`)),wr=class{constructor(t){this._hashersByName={},this._hashersByCode={},this._loadHasher=t.loadHasher||$d;for(let r of t.hashers)this.addHasher(r)}addHasher(t){if(this._hashersByName[t.name]||this._hashersByCode[t.code])throw new Error(`Resolver already exists for codec "${t.name}"`);this._hashersByName[t.name]=t,this._hashersByCode[t.code]=t}removeHasher(t){delete this._hashersByName[t.name],delete this._hashersByCode[t.code]}async getHasher(t){let r=typeof t=="string"?this._hashersByName:this._hashersByCode;if(r[t])return r[t];let n=await this._loadHasher(t);return r[t]==null&&this.addHasher(n),n}listHashers(){return Object.values(this._hashersByName)}};var Gn={};I(Gn,{code:()=>Om,createLink:()=>ai,createNode:()=>ii,decode:()=>Lm,encode:()=>Rm,name:()=>Nm,prepare:()=>Hn,validate:()=>Vn});C();var Cm=new TextDecoder;function Mn(e,t){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(t>=e.length)throw new Error("protobuf: unexpected end of data");let o=e[t++];if(r+=n<28?(o&127)<<n:(o&127)*2**n,o<128)break}return[r,t]}function Pr(e,t){let r;[r,t]=Mn(e,t);let n=t+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(t,n),n]}function Zs(e,t){let r;return[r,t]=Mn(e,t),[r&7,r>>3,t]}function Tm(e){let t={},r=e.length,n=0;for(;n<r;){let o,s;if([o,s,n]=Zs(e,n),s===1){if(t.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Hash`);if(t.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[t.Hash,n]=Pr(e,n)}else if(s===2){if(t.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Name`);if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let i;[i,n]=Pr(e,n),t.Name=Cm.decode(i)}else if(s===3){if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(o!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Tsize`);[t.Tsize,n]=Mn(e,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${s}`)}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return t}function Ys(e){let t=e.length,r=0,n,o=!1,s;for(;r<t;){let a,l;if([a,l,r]=Zs(e,r),a!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${a}`);if(l===1){if(s)throw new Error("protobuf: (PBNode) duplicate Data section");[s,r]=Pr(e,r),n&&(o=!0)}else if(l===2){if(o)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let h;[h,r]=Pr(e,r),n.push(Tm(h))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${l}`)}if(r>t)throw new Error("protobuf: (PBNode) unexpected end of data");let i={};return s&&(i.Data=s),i.Links=n||[],i}var ti=new TextEncoder,ei=2**32,Pm=2**31;function Am(e,t){let r=t.length;if(typeof e.Tsize=="number"){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");r=qt(t,r,e.Tsize)-1,t[r]=24}if(typeof e.Name=="string"){let n=ti.encode(e.Name);r-=n.length,t.set(n,r),r=qt(t,r,n.length)-1,t[r]=18}return e.Hash&&(r-=e.Hash.length,t.set(e.Hash,r),r=qt(t,r,e.Hash.length)-1,t[r]=10),t.length-r}function ri(e){let t=Bm(e),r=new Uint8Array(t),n=t;if(e.Data&&(n-=e.Data.length,r.set(e.Data,n),n=qt(r,n,e.Data.length)-1,r[n]=10),e.Links)for(let o=e.Links.length-1;o>=0;o--){let s=Am(e.Links[o],r.subarray(0,n));n-=s,n=qt(r,n,s)-1,r[n]=18}return r}function vm(e){let t=0;if(e.Hash){let r=e.Hash.length;t+=1+r+mt(r)}if(typeof e.Name=="string"){let r=ti.encode(e.Name).length;t+=1+r+mt(r)}return typeof e.Tsize=="number"&&(t+=1+mt(e.Tsize)),t}function Bm(e){let t=0;if(e.Data){let r=e.Data.length;t+=1+r+mt(r)}if(e.Links)for(let r of e.Links){let n=vm(r);t+=1+n+mt(n)}return t}function qt(e,t,r){t-=mt(r);let n=t;for(;r>=Pm;)e[t++]=r&127|128,r/=128;for(;r>=128;)e[t++]=r&127|128,r>>>=7;return e[t]=r,n}function mt(e){return e%2===0&&e++,Math.floor((Um(e)+6)/7)}function Um(e){let t=0;return e>=ei&&(e=Math.floor(e/ei),t=32),e>=65536&&(e>>>=16,t+=16),e>=256&&(e>>>=8,t+=8),t+km[e]}var km=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];C();var Im=["Data","Links"],_m=["Hash","Name","Tsize"],qn=new TextEncoder;function oi(e,t){if(e===t)return 0;let r=e.Name?qn.encode(e.Name):[],n=t.Name?qn.encode(t.Name):[],o=r.length,s=n.length;for(let i=0,a=Math.min(o,s);i<a;++i)if(r[i]!==n[i]){o=r[i],s=n[i];break}return o<s?-1:s<o?1:0}function ni(e,t){return!Object.keys(e).some(r=>!t.includes(r))}function si(e){if(typeof e.asCID=="object"){let r=m.asCID(e);if(!r)throw new TypeError("Invalid DAG-PB form");return{Hash:r}}if(typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");let t={};if(e.Hash){let r=m.asCID(e.Hash);try{r||(typeof e.Hash=="string"?r=m.parse(e.Hash):e.Hash instanceof Uint8Array&&(r=m.decode(e.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}r&&(t.Hash=r)}if(!t.Hash)throw new TypeError("Invalid DAG-PB form");return typeof e.Name=="string"&&(t.Name=e.Name),typeof e.Tsize=="number"&&(t.Tsize=e.Tsize),t}function Hn(e){if((e instanceof Uint8Array||typeof e=="string")&&(e={Data:e}),typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");let t={};if(e.Data!==void 0)if(typeof e.Data=="string")t.Data=qn.encode(e.Data);else if(e.Data instanceof Uint8Array)t.Data=e.Data;else throw new TypeError("Invalid DAG-PB form");if(e.Links!==void 0)if(Array.isArray(e.Links))t.Links=e.Links.map(si),t.Links.sort(oi);else throw new TypeError("Invalid DAG-PB form");else t.Links=[];return t}function Vn(e){if(!e||typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");if(!ni(e,Im))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(e.Data!==void 0&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let t=0;t<e.Links.length;t++){let r=e.Links[t];if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!ni(r,_m))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!r.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash.asCID!==r.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(r.Name!==void 0&&typeof r.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(r.Tsize!==void 0&&(typeof r.Tsize!="number"||r.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(t>0&&oi(r,e.Links[t-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function ii(e,t=[]){return Hn({Data:e,Links:t})}function ai(e,t,r){return si({Hash:r,Name:e,Tsize:t})}var Nm="dag-pb",Om=112;function Rm(e){Vn(e);let t={};return e.Links&&(t.Links=e.Links.map(r=>{let n={};return r.Hash&&(n.Hash=r.Hash.bytes),r.Name!==void 0&&(n.Name=r.Name),r.Tsize!==void 0&&(n.Tsize=r.Tsize),n})),e.Data&&(t.Data=e.Data),ri(t)}function Lm(e){let t=Ys(e),r={};return t.Data&&(r.Data=t.Data),t.Links&&(r.Links=t.Links.map(n=>{let o={};try{o.Hash=m.decode(n.Hash)}catch{}if(!o.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(o.Name=n.Name),n.Tsize!==void 0&&(o.Tsize=n.Tsize),o})),r}var fo={};I(fo,{code:()=>gh,decode:()=>bh,encode:()=>wh,name:()=>yh});jr();C();var ma=42;function lh(e){if(e.asCID!==e)return null;let t=m.asCID(e);if(!t)return null;let r=new Uint8Array(t.bytes.byteLength+1);return r.set(t.bytes,1),[new p(f.tag,ma),new p(f.bytes,r)]}function ph(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function dh(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var mh={float64:!0,typeEncoders:{Object:lh,undefined:ph,number:dh}};function hh(e){if(e[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return m.decode(e.subarray(1))}var ha={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};ha.tags[ma]=hh;var yh="dag-cbor",gh=113,wh=e=>Kt(e,mh),bh=e=>Ze(e,ha);var Eo={};I(Eo,{code:()=>Uh,decode:()=>Ih,encode:()=>kh,name:()=>Bh});ho();Zt();jr();X();ao();te();je();var yo=class extends Array{constructor(){super(),this.inRecursive=[]}prefix(t){let r=this.inRecursive[this.inRecursive.length-1];r&&(r.type===f.array&&(r.elements++,r.elements!==1&&t.push([44])),r.type===f.map&&(r.elements++,r.elements!==1&&(r.elements%2===1?t.push([44]):t.push([58]))))}[f.uint.major](t,r){this.prefix(t);let n=String(r.value),o=[];for(let s=0;s<n.length;s++)o[s]=n.charCodeAt(s);t.push(o)}[f.negint.major](t,r){this[f.uint.major](t,r)}[f.bytes.major](t,r){throw new Error(`${Ie} unsupported type: Uint8Array`)}[f.string.major](t,r){this.prefix(t);let n=vr(JSON.stringify(r.value));t.push(n.length>32?Ht(n):n)}[f.array.major](t,r){this.prefix(t),this.inRecursive.push({type:f.array,elements:0}),t.push([91])}[f.map.major](t,r){this.prefix(t),this.inRecursive.push({type:f.map,elements:0}),t.push([123])}[f.tag.major](t,r){}[f.float.major](t,r){if(r.type.name==="break"){let i=this.inRecursive.pop();if(i){if(i.type===f.array)t.push([93]);else if(i.type===f.map)t.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(r.value===void 0)throw new Error(`${Ie} unsupported type: undefined`);if(this.prefix(t),r.type.name==="true"){t.push([116,114,117,101]);return}else if(r.type.name==="false"){t.push([102,97,108,115,101]);return}else if(r.type.name==="null"){t.push([110,117,108,108]);return}let n=String(r.value),o=[],s=!1;for(let i=0;i<n.length;i++)o[i]=n.charCodeAt(i),!s&&(o[i]===46||o[i]===101||o[i]===69)&&(s=!0);s||(o.push(46),o.push(48)),t.push(o)}};function xh(e,t){if(Array.isArray(e[0])||Array.isArray(t[0]))throw new Error(`${Ie} complex map keys are not supported`);let r=e[0],n=t[0];if(r.type!==f.string||n.type!==f.string)throw new Error(`${Ie} non-string map keys are not supported`);if(r<n)return-1;if(r>n)return 1;throw new Error(`${Ie} unexpected duplicate map keys, this is not supported`)}var Sh={addBreakTokens:!0,mapSorter:xh};function go(e,t){return t=Object.assign({},Sh,t),io(e,new yo,t)}uo();X();je();te();var Dt=class{constructor(t,r={}){this.pos=0,this.data=t,this.options=r,this.modeStack=["value"],this.lastToken=""}done(){return this.pos>=this.data.length}ch(){return this.data[this.pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let t=this.ch();for(;t===32||t===9||t===13||t===10;)t=this.data[++this.pos]}expect(t){if(this.data.length-this.pos<t.length)throw new Error(`${w} unexpected end of input at position ${this.pos}`);for(let r=0;r<t.length;r++)if(this.data[this.pos++]!==t[r])throw new Error(`${w} unexpected token at position ${this.pos}, expected to find '${String.fromCharCode(...t)}'`)}parseNumber(){let t=this.pos,r=!1,n=!1,o=a=>{for(;!this.done();){let l=this.ch();if(a.includes(l))this.pos++;else break}};if(this.ch()===45&&(r=!0,this.pos++),this.ch()===48)if(this.pos++,this.ch()===46)this.pos++,n=!0;else return new p(f.uint,0,this.pos-t);if(o([48,49,50,51,52,53,54,55,56,57]),r&&this.pos===t+1)throw new Error(`${w} unexpected token at position ${this.pos}`);if(!this.done()&&this.ch()===46){if(n)throw new Error(`${w} unexpected token at position ${this.pos}`);n=!0,this.pos++,o([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(n=!0,this.pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this.pos++,o([48,49,50,51,52,53,54,55,56,57]));let s=String.fromCharCode.apply(null,this.data.subarray(t,this.pos)),i=parseFloat(s);return n?new p(f.float,i,this.pos-t):this.options.allowBigInt!==!0||Number.isSafeInteger(i)?new p(i>=0?f.uint:f.negint,i,this.pos-t):new p(i>=0?f.uint:f.negint,BigInt(s),this.pos-t)}parseString(){if(this.ch()!==34)throw new Error(`${w} unexpected character at position ${this.pos}; this shouldn't happen`);this.pos++;for(let s=this.pos,i=0;s<this.data.length&&i<65536;s++,i++){let a=this.data[s];if(a===92||a<32||a>=128)break;if(a===34){let l=String.fromCharCode.apply(null,this.data.subarray(this.pos,s));return this.pos=s+1,new p(f.string,l,i)}}let t=this.pos,r=[],n=()=>{if(this.pos+4>=this.data.length)throw new Error(`${w} unexpected end of unicode escape sequence at position ${this.pos}`);let s=0;for(let i=0;i<4;i++){let a=this.ch();if(a>=48&&a<=57)a-=48;else if(a>=97&&a<=102)a=a-97+10;else if(a>=65&&a<=70)a=a-65+10;else throw new Error(`${w} unexpected unicode escape character at position ${this.pos}`);s=s*16+a,this.pos++}return s},o=()=>{let s=this.ch(),i=null,a=s>239?4:s>223?3:s>191?2:1;if(this.pos+a>this.data.length)throw new Error(`${w} unexpected unicode sequence at position ${this.pos}`);let l,h,d,y;switch(a){case 1:s<128&&(i=s);break;case 2:l=this.data[this.pos+1],(l&192)===128&&(y=(s&31)<<6|l&63,y>127&&(i=y));break;case 3:l=this.data[this.pos+1],h=this.data[this.pos+2],(l&192)===128&&(h&192)===128&&(y=(s&15)<<12|(l&63)<<6|h&63,y>2047&&(y<55296||y>57343)&&(i=y));break;case 4:l=this.data[this.pos+1],h=this.data[this.pos+2],d=this.data[this.pos+3],(l&192)===128&&(h&192)===128&&(d&192)===128&&(y=(s&15)<<18|(l&63)<<12|(h&63)<<6|d&63,y>65535&&y<1114112&&(i=y))}i===null?(i=65533,a=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|i&1023),r.push(i),this.pos+=a};for(;!this.done();){let s=this.ch(),i;switch(s){case 92:if(this.pos++,this.done())throw new Error(`${w} unexpected string termination at position ${this.pos}`);switch(i=this.ch(),this.pos++,i){case 34:case 39:case 92:case 47:r.push(i);break;case 98:r.push(8);break;case 116:r.push(9);break;case 110:r.push(10);break;case 102:r.push(12);break;case 114:r.push(13);break;case 117:r.push(n());break;default:throw new Error(`${w} unexpected string escape character at position ${this.pos}`)}break;case 34:return this.pos++,new p(f.string,Wn(r),this.pos-t);default:if(s<32)throw new Error(`${w} invalid control character at position ${this.pos}`);s<128?(r.push(s),this.pos++):o()}}throw new Error(`${w} unexpected end of string at position ${this.pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this.pos++,new p(f.map,1/0,1);case 91:return this.modeStack.push("array-start"),this.pos++,new p(f.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new p(f.null,null,4);case 102:return this.expect([102,97,108,115,101]),new p(f.false,!1,5);case 116:return this.expect([116,114,117,101]),new p(f.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${w} unexpected character at position ${this.pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this.pos++,this.skipWhitespace(),new p(f.break,void 0,1);if(this.ch()!==44)throw new Error(`${w} unexpected character at position ${this.pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this.pos++,this.skipWhitespace(),new p(f.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this.pos++,this.skipWhitespace(),new p(f.break,void 0,1);if(this.ch()!==44)throw new Error(`${w} unexpected character at position ${this.pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this.pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this.pos++,this.skipWhitespace(),new p(f.break,void 0,1);let t=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${w} unexpected character at position ${this.pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("obj-value"),t}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${w} unexpected parse state at position ${this.pos}; this shouldn't happen`)}}};function wo(e,t){return t=Object.assign({tokenizer:new Dt(e,t)},t),Ze(e,t)}function Th(e){if(e.asCID!==e)return null;let t=m.asCID(e);if(!t)return null;let r=t.toString();return[new p(f.map,1/0,1),new p(f.string,"/",1),new p(f.string,r,r.length),new p(f.break,void 0,1)]}function ga(e){let t=zr.encode(e).slice(1);return[new p(f.map,1/0,1),new p(f.string,"/",1),new p(f.map,1/0,1),new p(f.string,"bytes",5),new p(f.string,t,t.length),new p(f.break,void 0,1),new p(f.break,void 0,1)]}function Ph(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function Ah(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var vh={typeEncoders:{Object:Th,Uint8Array:ga,Buffer:ga,undefined:Ph,number:Ah}},bo=class extends Dt{constructor(t,r){super(t,r),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){let t=this._next();if(t.type===f.map){let r=this._next();if(r.type===f.string&&r.value==="/"){let n=this._next();if(n.type===f.string){if(this._next().type!==f.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(n),new p(f.tag,42,0)}if(n.type===f.map){let o=this._next();if(o.type===f.string&&o.value==="bytes"){let s=this._next();if(s.type===f.string){for(let a=0;a<2;a++)if(this._next().type!==f.break)throw new Error("Invalid encoded Bytes form");let i=zr.decode(`m${s.value}`);return new p(f.bytes,i,s.value.length)}this.tokenBuffer.push(s)}this.tokenBuffer.push(o)}this.tokenBuffer.push(n)}this.tokenBuffer.push(r)}return t}},Do={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};Do.tags[42]=m.parse;var Bh="dag-json",Uh=297,kh=e=>go(e,vh),Ih=e=>{let t=Object.assign(Do,{tokenizer:new bo(e,Do)});return wo(e,t)};var lb=E(Ua(),1);Bo();jo();C();var Ds=E(Q(),1),Be=E(rs(),1);var wg=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/uig;T.nanosecond=T.ns=1/1e6;T.\u00B5s=T.\u03BCs=T.us=T.microsecond=1/1e3;T.millisecond=T.ms=T[""]=1;T.second=T.sec=T.s=T.ms*1e3;T.minute=T.min=T.m=T.s*60;T.hour=T.hr=T.h=T.m*60;T.day=T.d=T.h*24;T.week=T.wk=T.w=T.d*7;T.month=T.b=T.d*(365.25/12);T.year=T.yr=T.y=T.d*365.25;function T(e="",t="ms"){var r=null;e=(e+"").replace(/(\d)[,_](\d)/g,"$1$2");var n=e[0]==="-";return e.replace(wg,function(o,s,i){i=$c(i),i&&(r=(r||0)+Math.abs(parseFloat(s,10))*i)}),r&&r/($c(t)||1)*(n?-1:1)}function $c(e){return T[e]||T[e.toLowerCase().replace(/s$/,"")]}var Fc=T;var Bu=E(ns(),1),nt=E(cn(),1);var Du=E(ps(),1),Eu=Du.default;var Cu=E(Q(),1),Tu=E(Su(),1);function bs(e){try{e=(0,Tu.default)(new Cu.Multiaddr(e))}catch{}return e=e.toString(),e}var Pu=()=>{};var Au=(0,Bu.default)("ipfs-http-client:lib:error-handler"),bw=Eu.bind({ignoreUndefined:!0}),Dw=Be.isBrowser||Be.isWebWorker?location.protocol:"http",Ew=Be.isBrowser||Be.isWebWorker?location.hostname:"localhost",xw=Be.isBrowser||Be.isWebWorker?location.port:"5001",Sw=(e={})=>{let t,r={},n;if(typeof e=="string"||Ds.Multiaddr.isMultiaddr(e))t=new URL(bs(e));else if(e instanceof URL)t=e;else if(typeof e.url=="string"||Ds.Multiaddr.isMultiaddr(e.url))t=new URL(bs(e.url)),r=e;else if(e.url instanceof URL)t=e.url,r=e;else{r=e||{};let o=(r.protocol||Dw).replace(":",""),s=(r.host||Ew).split(":")[0],i=r.port||xw;t=new URL(`${o}://${s}:${i}`)}if(r.apiPath?t.pathname=r.apiPath:(t.pathname==="/"||t.pathname===void 0)&&(t.pathname="api/v0"),Be.isNode){let o=Pu(t);n=r.agent||new o({keepAlive:!0,maxSockets:6})}return{...r,host:t.host,protocol:t.protocol.replace(":",""),port:Number(t.port),apiPath:t.pathname,url:t,agent:n}},Cw=async e=>{let t;try{if((e.headers.get("Content-Type")||"").startsWith("application/json")){let n=await e.json();Au(n),t=n.Message||n.message}else t=await e.text()}catch(n){Au("Failed to parse error response",n),t=n.message}let r=new nt.default.HTTPError(e);throw t&&(t.includes("deadline has elapsed")&&(r=new nt.default.TimeoutError),t&&t.includes("context deadline exceeded")&&(r=new nt.default.TimeoutError)),t&&t.includes("request timed out")&&(r=new nt.default.TimeoutError),t&&(r.message=t),r},Tw=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,vu=e=>e.replace(Tw,function(t){return"-"+t.toLowerCase()}),Pw=e=>typeof e=="string"?Fc(e):e,Ve=class extends nt.default{constructor(t={}){let r=Sw(t);super({timeout:Pw(r.timeout||0)||void 0,headers:r.headers,base:`${r.url}`,handleError:Cw,transformSearchParams:o=>{let s=new URLSearchParams;for(let[i,a]of o)a!=="undefined"&&a!=="null"&&i!=="signal"&&s.append(vu(i),a),i==="timeout"&&!isNaN(a)&&s.append(vu(i),a);return s},agent:r.agent}),delete this.get,delete this.put,delete this.delete,delete this.options;let n=this.fetch;this.fetch=(o,s={})=>(typeof o=="string"&&!o.startsWith("/")&&(o=`${r.url}/${o}`),n.call(this,o,bw(s,{method:"POST"})))}},u0=nt.default.HTTPError;var c=e=>t=>e(new Ve(t),t);function fn(e){if(e!=null)return typeof e=="string"?e:e.toString(8).padStart(4,"0")}var Uu=E(ie(),1);function ln(e){if(e==null)return;let t;if(e.secs!=null&&(t={secs:e.secs,nsecs:e.nsecs}),e.Seconds!=null&&(t={secs:e.Seconds,nsecs:e.FractionalNanoseconds}),Array.isArray(e)&&(t={secs:e[0],nsecs:e[1]}),e instanceof Date){let r=e.getTime(),n=Math.floor(r/1e3);t={secs:n,nsecs:(r-n*1e3)*1e3}}if(Object.prototype.hasOwnProperty.call(t,"secs")){if(t!=null&&t.nsecs!=null&&(t.nsecs<0||t.nsecs>999999999))throw(0,Uu.default)(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return t}}function u({arg:e,searchParams:t,hashAlg:r,mtime:n,mode:o,...s}={}){t&&(s={...s,...t}),r&&(s.hash=r),n!=null&&(n=ln(n),s.mtime=n.secs,s.mtimeNsecs=n.nsecs),o!=null&&(s.mode=fn(o)),s.timeout&&!isNaN(s.timeout)&&(s.timeout=`${s.timeout}ms`),e==null?e=[]:Array.isArray(e)||(e=[e]);let i=new URLSearchParams(s);return e.forEach(a=>i.append("arg",a)),i}var ku=c(e=>{async function t(r={}){return((await(await e.post("bitswap/wantlist",{signal:r.signal,searchParams:u(r),headers:r.headers})).json()).Keys||[]).map(o=>m.parse(o["/"]))}return t});C();var Iu=c(e=>{async function t(r,n={}){return((await(await e.post("bitswap/wantlist",{signal:n.signal,searchParams:u({...n,peer:r.toString()}),headers:n.headers})).json()).Keys||[]).map(s=>m.parse(s["/"]))}return t});C();var pn=c(e=>{async function t(r={}){let n=await e.post("bitswap/stat",{searchParams:u(r),signal:r.signal,headers:r.headers});return Aw(await n.json())}return t});function Aw(e){return{provideBufLen:e.ProvideBufLen,wantlist:(e.Wantlist||[]).map(t=>m.parse(t["/"])),peers:e.Peers||[],blocksReceived:BigInt(e.BlocksReceived),dataReceived:BigInt(e.DataReceived),blocksSent:BigInt(e.BlocksSent),dataSent:BigInt(e.DataSent),dupBlksReceived:BigInt(e.DupBlksReceived),dupDataReceived:BigInt(e.DupDataReceived)}}var _u=c(e=>{async function t(r,n={}){return(await e.post("bitswap/unwant",{signal:n.signal,searchParams:u({arg:r.toString(),...n}),headers:n.headers})).json()}return t});function Nu(e){return{wantlist:ku(e),wantlistForPeer:Iu(e),unwant:_u(e),stat:pn(e)}}var dn=c(e=>{async function t(r,n={}){let o=await e.post("block/get",{signal:n.signal,searchParams:u({arg:r.toString(),...n}),headers:n.headers});return new Uint8Array(await o.arrayBuffer())}return t});C();var Lu=E(ie()),$u=E(mn()),Fu=E(ar()),ju=E(gs());function Oe(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function ot(e){return e.constructor&&(e.constructor.name==="Blob"||e.constructor.name==="File")&&typeof e.stream=="function"}function cr(e){return typeof e=="object"&&(e.path||e.content)}var st=e=>e&&typeof e.getReader=="function";async function hn(e){if(Oe(e))return new Blob([e]);if(typeof e=="string"||e instanceof String)return new Blob([e.toString()]);if(ot(e))return e;if(st(e)&&(e=(0,Fu.default)(e)),Symbol.iterator in e||Symbol.asyncIterator in e){let t=(0,$u.default)(e),{value:r,done:n}=await t.peek();if(n)return Ru(t);if(t.push(r),Number.isInteger(r))return new Blob([Uint8Array.from(await(0,ju.default)(t))]);if(Oe(r)||typeof r=="string"||r instanceof String)return Ru(t)}throw(0,Lu.default)(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT")}async function Ru(e){let t=[];for await(let r of e)t.push(r);return new Blob(t)}var pr=E(ie(),1),xf=E(ar(),1),Sf=E(mn(),1),Os=E(Mu(),1);var Ef=E(ie(),1);var Re=E(Df(),1),Nt=Re.default.Reader,_s=Re.default.Writer,x=Re.default.util,W=Re.default.roots["ipfs-unixfs"]||(Re.default.roots["ipfs-unixfs"]={}),Lw=W.Data=(()=>{function e(t){if(this.blocksizes=[],t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.Type=0,e.prototype.Data=x.newBuffer([]),e.prototype.filesize=x.Long?x.Long.fromBits(0,0,!0):0,e.prototype.blocksizes=x.emptyArray,e.prototype.hashType=x.Long?x.Long.fromBits(0,0,!0):0,e.prototype.fanout=x.Long?x.Long.fromBits(0,0,!0):0,e.prototype.mode=0,e.prototype.mtime=null,e.encode=function(r,n){if(n||(n=_s.create()),n.uint32(8).int32(r.Type),r.Data!=null&&Object.hasOwnProperty.call(r,"Data")&&n.uint32(18).bytes(r.Data),r.filesize!=null&&Object.hasOwnProperty.call(r,"filesize")&&n.uint32(24).uint64(r.filesize),r.blocksizes!=null&&r.blocksizes.length)for(var o=0;o<r.blocksizes.length;++o)n.uint32(32).uint64(r.blocksizes[o]);return r.hashType!=null&&Object.hasOwnProperty.call(r,"hashType")&&n.uint32(40).uint64(r.hashType),r.fanout!=null&&Object.hasOwnProperty.call(r,"fanout")&&n.uint32(48).uint64(r.fanout),r.mode!=null&&Object.hasOwnProperty.call(r,"mode")&&n.uint32(56).uint32(r.mode),r.mtime!=null&&Object.hasOwnProperty.call(r,"mtime")&&W.UnixTime.encode(r.mtime,n.uint32(66).fork()).ldelim(),n},e.decode=function(r,n){r instanceof Nt||(r=Nt.create(r));for(var o=n===void 0?r.len:r.pos+n,s=new W.Data;r.pos<o;){var i=r.uint32();switch(i>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;case 3:s.filesize=r.uint64();break;case 4:if(s.blocksizes&&s.blocksizes.length||(s.blocksizes=[]),(i&7)===2)for(var a=r.uint32()+r.pos;r.pos<a;)s.blocksizes.push(r.uint64());else s.blocksizes.push(r.uint64());break;case 5:s.hashType=r.uint64();break;case 6:s.fanout=r.uint64();break;case 7:s.mode=r.uint32();break;case 8:s.mtime=W.UnixTime.decode(r,r.uint32());break;default:r.skipType(i&7);break}}if(!s.hasOwnProperty("Type"))throw x.ProtocolError("missing required 'Type'",{instance:s});return s},e.fromObject=function(r){if(r instanceof W.Data)return r;var n=new W.Data;switch(r.Type){case"Raw":case 0:n.Type=0;break;case"Directory":case 1:n.Type=1;break;case"File":case 2:n.Type=2;break;case"Metadata":case 3:n.Type=3;break;case"Symlink":case 4:n.Type=4;break;case"HAMTShard":case 5:n.Type=5;break}if(r.Data!=null&&(typeof r.Data=="string"?x.base64.decode(r.Data,n.Data=x.newBuffer(x.base64.length(r.Data)),0):r.Data.length&&(n.Data=r.Data)),r.filesize!=null&&(x.Long?(n.filesize=x.Long.fromValue(r.filesize)).unsigned=!0:typeof r.filesize=="string"?n.filesize=parseInt(r.filesize,10):typeof r.filesize=="number"?n.filesize=r.filesize:typeof r.filesize=="object"&&(n.filesize=new x.LongBits(r.filesize.low>>>0,r.filesize.high>>>0).toNumber(!0))),r.blocksizes){if(!Array.isArray(r.blocksizes))throw TypeError(".Data.blocksizes: array expected");n.blocksizes=[];for(var o=0;o<r.blocksizes.length;++o)x.Long?(n.blocksizes[o]=x.Long.fromValue(r.blocksizes[o])).unsigned=!0:typeof r.blocksizes[o]=="string"?n.blocksizes[o]=parseInt(r.blocksizes[o],10):typeof r.blocksizes[o]=="number"?n.blocksizes[o]=r.blocksizes[o]:typeof r.blocksizes[o]=="object"&&(n.blocksizes[o]=new x.LongBits(r.blocksizes[o].low>>>0,r.blocksizes[o].high>>>0).toNumber(!0))}if(r.hashType!=null&&(x.Long?(n.hashType=x.Long.fromValue(r.hashType)).unsigned=!0:typeof r.hashType=="string"?n.hashType=parseInt(r.hashType,10):typeof r.hashType=="number"?n.hashType=r.hashType:typeof r.hashType=="object"&&(n.hashType=new x.LongBits(r.hashType.low>>>0,r.hashType.high>>>0).toNumber(!0))),r.fanout!=null&&(x.Long?(n.fanout=x.Long.fromValue(r.fanout)).unsigned=!0:typeof r.fanout=="string"?n.fanout=parseInt(r.fanout,10):typeof r.fanout=="number"?n.fanout=r.fanout:typeof r.fanout=="object"&&(n.fanout=new x.LongBits(r.fanout.low>>>0,r.fanout.high>>>0).toNumber(!0))),r.mode!=null&&(n.mode=r.mode>>>0),r.mtime!=null){if(typeof r.mtime!="object")throw TypeError(".Data.mtime: object expected");n.mtime=W.UnixTime.fromObject(r.mtime)}return n},e.toObject=function(r,n){n||(n={});var o={};if((n.arrays||n.defaults)&&(o.blocksizes=[]),n.defaults){if(o.Type=n.enums===String?"Raw":0,n.bytes===String?o.Data="":(o.Data=[],n.bytes!==Array&&(o.Data=x.newBuffer(o.Data))),x.Long){var s=new x.Long(0,0,!0);o.filesize=n.longs===String?s.toString():n.longs===Number?s.toNumber():s}else o.filesize=n.longs===String?"0":0;if(x.Long){var s=new x.Long(0,0,!0);o.hashType=n.longs===String?s.toString():n.longs===Number?s.toNumber():s}else o.hashType=n.longs===String?"0":0;if(x.Long){var s=new x.Long(0,0,!0);o.fanout=n.longs===String?s.toString():n.longs===Number?s.toNumber():s}else o.fanout=n.longs===String?"0":0;o.mode=0,o.mtime=null}if(r.Type!=null&&r.hasOwnProperty("Type")&&(o.Type=n.enums===String?W.Data.DataType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(o.Data=n.bytes===String?x.base64.encode(r.Data,0,r.Data.length):n.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),r.filesize!=null&&r.hasOwnProperty("filesize")&&(typeof r.filesize=="number"?o.filesize=n.longs===String?String(r.filesize):r.filesize:o.filesize=n.longs===String?x.Long.prototype.toString.call(r.filesize):n.longs===Number?new x.LongBits(r.filesize.low>>>0,r.filesize.high>>>0).toNumber(!0):r.filesize),r.blocksizes&&r.blocksizes.length){o.blocksizes=[];for(var i=0;i<r.blocksizes.length;++i)typeof r.blocksizes[i]=="number"?o.blocksizes[i]=n.longs===String?String(r.blocksizes[i]):r.blocksizes[i]:o.blocksizes[i]=n.longs===String?x.Long.prototype.toString.call(r.blocksizes[i]):n.longs===Number?new x.LongBits(r.blocksizes[i].low>>>0,r.blocksizes[i].high>>>0).toNumber(!0):r.blocksizes[i]}return r.hashType!=null&&r.hasOwnProperty("hashType")&&(typeof r.hashType=="number"?o.hashType=n.longs===String?String(r.hashType):r.hashType:o.hashType=n.longs===String?x.Long.prototype.toString.call(r.hashType):n.longs===Number?new x.LongBits(r.hashType.low>>>0,r.hashType.high>>>0).toNumber(!0):r.hashType),r.fanout!=null&&r.hasOwnProperty("fanout")&&(typeof r.fanout=="number"?o.fanout=n.longs===String?String(r.fanout):r.fanout:o.fanout=n.longs===String?x.Long.prototype.toString.call(r.fanout):n.longs===Number?new x.LongBits(r.fanout.low>>>0,r.fanout.high>>>0).toNumber(!0):r.fanout),r.mode!=null&&r.hasOwnProperty("mode")&&(o.mode=r.mode),r.mtime!=null&&r.hasOwnProperty("mtime")&&(o.mtime=W.UnixTime.toObject(r.mtime,n)),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,Re.default.util.toJSONOptions)},e.DataType=function(){let t={},r=Object.create(t);return r[t[0]="Raw"]=0,r[t[1]="Directory"]=1,r[t[2]="File"]=2,r[t[3]="Metadata"]=3,r[t[4]="Symlink"]=4,r[t[5]="HAMTShard"]=5,r}(),e})(),n8=W.UnixTime=(()=>{function e(t){if(t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.Seconds=x.Long?x.Long.fromBits(0,0,!1):0,e.prototype.FractionalNanoseconds=0,e.encode=function(r,n){return n||(n=_s.create()),n.uint32(8).int64(r.Seconds),r.FractionalNanoseconds!=null&&Object.hasOwnProperty.call(r,"FractionalNanoseconds")&&n.uint32(21).fixed32(r.FractionalNanoseconds),n},e.decode=function(r,n){r instanceof Nt||(r=Nt.create(r));for(var o=n===void 0?r.len:r.pos+n,s=new W.UnixTime;r.pos<o;){var i=r.uint32();switch(i>>>3){case 1:s.Seconds=r.int64();break;case 2:s.FractionalNanoseconds=r.fixed32();break;default:r.skipType(i&7);break}}if(!s.hasOwnProperty("Seconds"))throw x.ProtocolError("missing required 'Seconds'",{instance:s});return s},e.fromObject=function(r){if(r instanceof W.UnixTime)return r;var n=new W.UnixTime;return r.Seconds!=null&&(x.Long?(n.Seconds=x.Long.fromValue(r.Seconds)).unsigned=!1:typeof r.Seconds=="string"?n.Seconds=parseInt(r.Seconds,10):typeof r.Seconds=="number"?n.Seconds=r.Seconds:typeof r.Seconds=="object"&&(n.Seconds=new x.LongBits(r.Seconds.low>>>0,r.Seconds.high>>>0).toNumber())),r.FractionalNanoseconds!=null&&(n.FractionalNanoseconds=r.FractionalNanoseconds>>>0),n},e.toObject=function(r,n){n||(n={});var o={};if(n.defaults){if(x.Long){var s=new x.Long(0,0,!1);o.Seconds=n.longs===String?s.toString():n.longs===Number?s.toNumber():s}else o.Seconds=n.longs===String?"0":0;o.FractionalNanoseconds=0}return r.Seconds!=null&&r.hasOwnProperty("Seconds")&&(typeof r.Seconds=="number"?o.Seconds=n.longs===String?String(r.Seconds):r.Seconds:o.Seconds=n.longs===String?x.Long.prototype.toString.call(r.Seconds):n.longs===Number?new x.LongBits(r.Seconds.low>>>0,r.Seconds.high>>>0).toNumber():r.Seconds),r.FractionalNanoseconds!=null&&r.hasOwnProperty("FractionalNanoseconds")&&(o.FractionalNanoseconds=r.FractionalNanoseconds),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,Re.default.util.toJSONOptions)},e})(),o8=W.Metadata=(()=>{function e(t){if(t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.MimeType="",e.encode=function(r,n){return n||(n=_s.create()),r.MimeType!=null&&Object.hasOwnProperty.call(r,"MimeType")&&n.uint32(10).string(r.MimeType),n},e.decode=function(r,n){r instanceof Nt||(r=Nt.create(r));for(var o=n===void 0?r.len:r.pos+n,s=new W.Metadata;r.pos<o;){var i=r.uint32();switch(i>>>3){case 1:s.MimeType=r.string();break;default:r.skipType(i&7);break}}return s},e.fromObject=function(r){if(r instanceof W.Metadata)return r;var n=new W.Metadata;return r.MimeType!=null&&(n.MimeType=String(r.MimeType)),n},e.toObject=function(r,n){n||(n={});var o={};return n.defaults&&(o.MimeType=""),r.MimeType!=null&&r.hasOwnProperty("MimeType")&&(o.MimeType=r.MimeType),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,Re.default.util.toJSONOptions)},e})();var s8=parseInt("0644",8),i8=parseInt("0755",8);function wn(e){if(e!=null)return typeof e=="number"?e&4095:(e=e.toString(),e.substring(0,1)==="0"?parseInt(e,8)&4095:parseInt(e,10)&4095)}function bn(e){if(e==null)return;let t;if(e.secs!=null&&(t={secs:e.secs,nsecs:e.nsecs}),e.Seconds!=null&&(t={secs:e.Seconds,nsecs:e.FractionalNanoseconds}),Array.isArray(e)&&(t={secs:e[0],nsecs:e[1]}),e instanceof Date){let r=e.getTime(),n=Math.floor(r/1e3);t={secs:n,nsecs:(r-n*1e3)*1e3}}if(Object.prototype.hasOwnProperty.call(t,"secs")){if(t!=null&&t.nsecs!=null&&(t.nsecs<0||t.nsecs>999999999))throw(0,Ef.default)(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return t}}async function*Cf(e,t){if(typeof e=="string"||e instanceof String||Oe(e)||ot(e)||e._readableState)throw(0,pr.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(st(e)&&(e=(0,xf.default)(e)),Symbol.iterator in e||Symbol.asyncIterator in e){let r=(0,Sf.default)(e),{value:n,done:o}=await r.peek();if(o){yield*[];return}if(r.push(n),Number.isInteger(n))throw(0,pr.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(n._readableState){yield*(0,Os.default)(r,s=>Ns({content:s},t));return}if(Oe(n)){yield Ns({content:r},t);return}if(cr(n)||n[Symbol.iterator]||n[Symbol.asyncIterator]||st(n)||ot(n)){yield*(0,Os.default)(r,s=>Ns(s,t));return}}throw cr(e)?(0,pr.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):(0,pr.default)(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}async function Ns(e,t){let{path:r,mode:n,mtime:o,content:s}=e,i={path:r||"",mode:wn(n),mtime:bn(o)};return s?i.content=await t(s):r||(i.content=await t(e)),i}function Tf(e){return Cf(e,hn,!0)}function Pf(e){if(e!=null)return typeof e=="string"?e:e.toString(8).padStart(4,"0")}async function F(e,t,r={}){let n=[],o=new FormData,s=0,i=0;for await(let{content:a,path:l,mode:h,mtime:d}of Tf(e)){let y="",P=a?"file":"dir";s>0&&(y=`-${s}`);let N=P+y,v=[];if(h!=null&&v.push(`mode=${Pf(h)}`),d!=null){let{secs:k,nsecs:_}=d;v.push(`mtime=${k}`),_!=null&&v.push(`mtime-nsecs=${_}`)}if(v.length&&(N=`${N}?${v.join("&")}`),a){o.set(N,a,l!=null?encodeURIComponent(l):void 0);let k=i+a.size;n.push({name:l,start:i,end:k}),i=k}else if(l!=null)o.set(N,new File([""],encodeURIComponent(l),{type:"application/x-directory"}));else throw new Error("path or content or both must be set");s++}return{total:i,parts:n,headers:r,body:o}}var Af=E(ys(),1);function Fw(e){return e.filter(Boolean)}function j(...e){return(0,Af.anySignal)(Fw(e))}var vf=c(e=>{async function t(r,n={}){let o=new AbortController,s=j(o.signal,n.signal),i;try{i=await(await e.post("block/put",{signal:s,searchParams:u(n),...await F([r],o,n.headers)})).json()}catch(a){if(n.format==="dag-pb")return t(r,{...n,format:"protobuf"});if(n.format==="dag-cbor")return t(r,{...n,format:"cbor"});throw a}return m.parse(i.Key)}return t});C();var Bf=c(e=>{async function*t(r,n={}){Array.isArray(r)||(r=[r]);let o=await e.post("block/rm",{signal:n.signal,searchParams:u({arg:r.map(s=>s.toString()),"stream-channels":!0,...n}),headers:n.headers});for await(let s of o.ndjson())yield jw(s)}return t});function jw(e){let t={cid:m.parse(e.Hash)};return e.Error&&(t.error=new Error(e.Error)),t}C();var Uf=c(e=>{async function t(r,n={}){let s=await(await e.post("block/stat",{signal:n.signal,searchParams:u({arg:r.toString(),...n}),headers:n.headers})).json();return{cid:m.parse(s.Key),size:s.Size}}return t});function kf(e){return{get:dn(e),put:vf(e),rm:Bf(e),stat:Uf(e)}}var If=E(Q(),1),_f=c(e=>{async function t(r,n={}){let o=await e.post("bootstrap/add",{signal:n.signal,searchParams:u({arg:r,...n}),headers:n.headers}),{Peers:s}=await o.json();return{Peers:s.map(i=>new If.Multiaddr(i))}}return t});var Nf=E(Q(),1),Of=c(e=>{async function t(r={}){let n=await e.post("bootstrap/rm",{signal:r.signal,searchParams:u({...r,all:!0}),headers:r.headers}),{Peers:o}=await n.json();return{Peers:o.map(s=>new Nf.Multiaddr(s))}}return t});var Rf=E(Q(),1),Lf=c(e=>{async function t(r={}){let n=await e.post("bootstrap/list",{signal:r.signal,searchParams:u(r),headers:r.headers}),{Peers:o}=await n.json();return{Peers:o.map(s=>new Rf.Multiaddr(s))}}return t});var $f=E(Q(),1),Ff=c(e=>{async function t(r={}){let n=await e.post("bootstrap/add",{signal:r.signal,searchParams:u({...r,default:!0}),headers:r.headers}),{Peers:o}=await n.json();return{Peers:o.map(s=>new $f.Multiaddr(s))}}return t});var jf=E(Q(),1),zf=c(e=>{async function t(r,n={}){let o=await e.post("bootstrap/rm",{signal:n.signal,searchParams:u({arg:r,...n}),headers:n.headers}),{Peers:s}=await o.json();return{Peers:s.map(i=>new jf.Multiaddr(i))}}return t});function Mf(e){return{add:_f(e),clear:Of(e),list:Lf(e),reset:Ff(e),rm:zf(e)}}var qf=c(e=>{async function t(r,n={}){let s=await(await e.post("config/profile/apply",{signal:n.signal,searchParams:u({arg:r,...n}),headers:n.headers})).json();return{original:s.OldCfg,updated:s.NewCfg}}return t});function A(e){if(e==null)return e;let t=/^[A-Z]+$/,r={};return Object.keys(e).reduce((n,o)=>(t.test(o)?n[o.toLowerCase()]=e[o]:t.test(o[0])?n[o[0].toLowerCase()+o.slice(1)]=e[o]:n[o]=e[o],n),r)}var Hf=c(e=>{async function t(r={}){return(await(await e.post("config/profile/list",{signal:r.signal,searchParams:u(r),headers:r.headers})).json()).map(s=>A(s))}return t});function Vf(e){return{apply:qf(e),list:Hf(e)}}var Gf=c(e=>async(r,n={})=>{if(!r)throw new Error("key argument is required");return(await(await e.post("config",{signal:n.signal,searchParams:u({arg:r,...n}),headers:n.headers})).json()).Value});var Wf=c(e=>async(r={})=>await(await e.post("config/show",{signal:r.signal,searchParams:u({...r}),headers:r.headers})).json());Ct();var Jf=c(e=>async(r,n={})=>{let o=new AbortController,s=j(o.signal,n.signal);await(await e.post("config/replace",{signal:s,searchParams:u(n),...await F([Ne(JSON.stringify(r))],o,n.headers)})).text()});var Kf=c(e=>async(r,n,o={})=>{if(typeof r!="string")throw new Error("Invalid key type");let s={...o,...zw(r,n)};await(await e.post("config",{signal:o.signal,searchParams:u(s),headers:o.headers})).text()}),zw=(e,t)=>{switch(typeof t){case"boolean":return{arg:[e,t.toString()],bool:!0};case"string":return{arg:[e,t]};default:return{arg:[e,JSON.stringify(t)],json:!0}}};function Xf(e){return{getAll:Wf(e),get:Gf(e),set:Kf(e),replace:Jf(e),profiles:Vf(e)}}var Qf=c(e=>{async function*t(r,n={}){yield*(await e.post("dag/export",{signal:n.signal,searchParams:u({arg:r.toString()}),headers:n.headers})).iterator()}return t});C();var Rs=E(ie(),1);async function*Ls(e,t,r,n,o){let s=async h=>{let d=await r.getCodec(h.code),y=await n(h,o);return d.decode(y)},i=t.split("/").filter(Boolean),a=await s(e),l=e;for(;i.length;){let h=i.shift();if(!h)throw(0,Rs.default)(new Error(`Could not resolve path "${t}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(a,h))a=a[h],yield{value:a,remainderPath:i.join("/")};else throw(0,Rs.default)(new Error(`no link named "${h}" under ${l}`),"ERR_NO_LINK");let d=m.asCID(a);d&&(l=d,a=await s(a))}yield{value:a,remainderPath:""}}var tl=E(Yf(),1),rl=E(dr(),1),nl=E(ie(),1);var ol=(e,t)=>c((n,o)=>{let s=dn(o);return async(a,l={})=>{if(l.path){let N=l.localResolve?await(0,tl.default)(Ls(a,l.path,e,s,l)):await(0,rl.default)(Ls(a,l.path,e,s,l));if(!N)throw(0,nl.default)(new Error("Not found"),"ERR_NOT_FOUND");return N}let h=await e.getCodec(a.code),d=await s(a,l);return{value:h.decode(d),remainderPath:""}}})(t);C();var sl=c(e=>{async function*t(r,n={}){let o=new AbortController,s=j(o.signal,n.signal),{headers:i,body:a}=await F(r,o,n.headers),l=await e.post("dag/import",{signal:s,headers:i,body:a,searchParams:u({"pin-roots":n.pinRoots})});for await(let{Root:h}of l.ndjson())if(h!==void 0){let{Cid:{"/":d},PinErrorMsg:y}=h;yield{root:{cid:m.parse(d),pinErrorMsg:y}}}}return t});C();var Dn=(e,t)=>c(n=>async(s,i={})=>{let a={storeCodec:"dag-cbor",hashAlg:"sha2-256",...i},l;if(a.inputCodec){if(!(s instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");l=s}else l=(await e.getCodec(a.storeCodec)).encode(s),a.inputCodec=a.storeCodec;let h=new AbortController,d=j(h.signal,a.signal),P=await(await n.post("dag/put",{timeout:a.timeout,signal:d,searchParams:u(a),...await F([l],h,a.headers)})).json();return m.parse(P.Cid["/"])})(t);C();var il=c(e=>async(r,n={})=>{let s=await(await e.post("dag/resolve",{signal:n.signal,searchParams:u({arg:`${r}${n.path?`/${n.path}`.replace(/\/[/]+/g,"/"):""}`,...n}),headers:n.headers})).json();return{cid:m.parse(s.Cid["/"]),remainderPath:s.RemPath}});function al(e,t){return{export:Qf(t),get:ol(e,t),import:sl(t),put:Dn(e,t),resolve:il(t)}}Ct();var mr=E(Q(),1),ye=e=>{if(e.Type===0)return{to:e.ID,name:"SENDING_QUERY",type:e.Type};if(e.Type===1)return{from:e.ID,name:"PEER_RESPONSE",type:e.Type,messageType:0,messageName:"PUT_VALUE",closer:(e.Responses||[]).map(({ID:t,Addrs:r})=>({id:t,multiaddrs:r.map(n=>new mr.Multiaddr(n))})),providers:(e.Responses||[]).map(({ID:t,Addrs:r})=>({id:t,multiaddrs:r.map(n=>new mr.Multiaddr(n))}))};if(e.Type===2){let t={id:e.ID,multiaddrs:[]};return e.Responses&&e.Responses.length&&(t={id:e.Responses[0].ID,multiaddrs:e.Responses[0].Addrs.map(r=>new mr.Multiaddr(r))}),{from:e.ID,name:"FINAL_PEER",type:e.Type,peer:t}}if(e.Type===3)return{from:e.ID,name:"QUERY_ERROR",type:e.Type,error:new Error(e.Extra)};if(e.Type===4)return{from:e.ID,name:"PROVIDER",type:e.Type,providers:e.Responses.map(({ID:t,Addrs:r})=>({id:t,multiaddrs:r.map(n=>new mr.Multiaddr(n))}))};if(e.Type===5)return{from:e.ID,name:"VALUE",type:e.Type,value:Ne(e.Extra,"base64pad")};if(e.Type===6){let t=e.Responses.map(({ID:r})=>r);if(!t.length)throw new Error("No peer found");return{name:"ADDING_PEER",type:e.Type,peer:t[0]}}if(e.Type===7)return{name:"DIALING_PEER",type:e.Type,peer:e.ID};throw new Error("Unknown DHT event type")};var cl=c(e=>{async function*t(r,n={}){let o=await e.post("dht/findpeer",{signal:n.signal,searchParams:u({arg:r,...n}),headers:n.headers});for await(let s of o.ndjson())yield ye(s)}return t});var ul=c(e=>{async function*t(r,n={}){let o=await e.post("dht/findprovs",{signal:n.signal,searchParams:u({arg:r.toString(),...n}),headers:n.headers});for await(let s of o.ndjson())yield ye(s)}return t});He();var fl=c(e=>{async function*t(r,n={}){let o=await e.post("dht/get",{signal:n.signal,searchParams:u({arg:r instanceof Uint8Array?et(r):r.toString(),...n}),headers:n.headers});for await(let s of o.ndjson())yield ye(s)}return t});var ll=c(e=>{async function*t(r,n={recursive:!1}){let o=Array.isArray(r)?r:[r],s=await e.post("dht/provide",{signal:n.signal,searchParams:u({arg:o.map(i=>i.toString()),...n}),headers:n.headers});for await(let i of s.ndjson())yield ye(i)}return t});He();var pl=c(e=>{async function*t(r,n,o={}){let s=new AbortController,i=j(s.signal,o.signal),a=await e.post("dht/put",{signal:i,searchParams:u({arg:r instanceof Uint8Array?et(r):r.toString(),...o}),...await F([n],s,o.headers)});for await(let l of a.ndjson())yield ye(l)}return t});var dl=c(e=>{async function*t(r,n={}){let o=await e.post("dht/query",{signal:n.signal,searchParams:u({arg:r.toString(),...n}),headers:n.headers});for await(let s of o.ndjson())yield ye(s)}return t});function ml(e){return{findPeer:cl(e),findProvs:ul(e),get:fl(e),provide:ll(e),put:pl(e),query:dl(e)}}var hl=c(e=>{async function t(r={}){return(await e.post("diag/cmds",{signal:r.signal,searchParams:u(r),headers:r.headers})).json()}return t});var yl=c(e=>{async function t(r={}){return(await e.post("diag/net",{signal:r.signal,searchParams:u(r),headers:r.headers})).json()}return t});var gl=c(e=>{async function t(r={}){return(await e.post("diag/sys",{signal:r.signal,searchParams:u(r),headers:r.headers})).json()}return t});function wl(e){return{cmds:hl(e),net:yl(e),sys:gl(e)}}var bl=c(e=>{async function t(r,n,o={}){await(await e.post("files/chmod",{signal:o.signal,searchParams:u({arg:r,mode:n,...o}),headers:o.headers})).text()}return t});C();var Dl=c(e=>{async function t(r,n,o={}){let s=Array.isArray(r)?r:[r];await(await e.post("files/cp",{signal:o.signal,searchParams:u({arg:s.concat(n).map(a=>m.asCID(a)?`/ipfs/${a}`:a),...o}),headers:o.headers})).text()}return t});C();var El=c(e=>{async function t(r,n={}){if(!r||typeof r!="string")throw new Error("ipfs.files.flush requires a path");let s=await(await e.post("files/flush",{signal:n.signal,searchParams:u({arg:r,...n}),headers:n.headers})).json();return m.parse(s.Cid)}return t});C();function hr(e){let t=A(e);return Object.prototype.hasOwnProperty.call(t,"mode")&&(t.mode=parseInt(t.mode,8)),Object.prototype.hasOwnProperty.call(t,"mtime")&&(t.mtime={secs:t.mtime,nsecs:t.mtimeNsecs||0},delete t.mtimeNsecs),t}var Sl=c(e=>{async function*t(r,n={}){if(!r)throw new Error("ipfs.files.ls requires a path");let o=await e.post("files/ls",{signal:n.signal,searchParams:u({arg:m.asCID(r)?`/ipfs/${r}`:r,long:!0,...n,stream:!0}),headers:n.headers});for await(let s of o.ndjson())if("Entries"in s)for(let i of s.Entries||[])yield xl(hr(i));else yield xl(hr(s))}return t});function xl(e){return e.hash&&(e.cid=m.parse(e.hash)),delete e.hash,e.type=e.type===1?"directory":"file",e}var Cl=c(e=>{async function t(r,n={}){await(await e.post("files/mkdir",{signal:n.signal,searchParams:u({arg:r,...n}),headers:n.headers})).text()}return t});var Tl=c(e=>{async function t(r,n,o={}){Array.isArray(r)||(r=[r]),await(await e.post("files/mv",{signal:o.signal,searchParams:u({arg:r.concat(n),...o}),headers:o.headers})).text()}return t});var vl=E(Al(),1),Bl=c(e=>{async function*t(r,n={}){let o=await e.post("files/read",{signal:n.signal,searchParams:u({arg:r,count:n.length,...n}),headers:n.headers});yield*(0,vl.default)(o.body)}return t});var Ul=E(cn(),1),kl=c(e=>{async function t(r,n={}){let o=await e.post("files/rm",{signal:n.signal,searchParams:u({arg:r,...n}),headers:n.headers}),s=await o.text();if(s!==""){let i=new Ul.default.HTTPError(o);throw i.message=s,i}}return t});C();var En=c(e=>{async function t(r,n={}){let s=await(await e.post("files/stat",{signal:n.signal,searchParams:u({arg:r,...n}),headers:n.headers})).json();return s.WithLocality=s.WithLocality||!1,Zw(hr(s))}return t});function Zw(e){return e.cid=m.parse(e.hash),delete e.hash,e}var Il=c(e=>{async function t(r,n={}){await(await e.post("files/touch",{signal:n.signal,searchParams:u({arg:r,...n}),headers:n.headers})).text()}return t});var _l=c(e=>{async function t(r,n,o={}){let s=new AbortController,i=j(s.signal,o.signal);await(await e.post("files/write",{signal:i,searchParams:u({arg:r,streamChannels:!0,count:o.length,...o}),...await F([{content:n,path:"arg",mode:fn(o.mode),mtime:ln(o.mtime)}],s,o.headers)})).text()}return t});function Nl(e){return{chmod:bl(e),cp:Dl(e),flush:El(e),ls:Sl(e),mkdir:Cl(e),mv:Tl(e),read:Bl(e),rm:kl(e),stat:En(e),touch:Il(e),write:_l(e)}}var Ol=E(ie(),1),Rl=c(e=>async(r,n,o={})=>{throw(0,Ol.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")});var Ll=c(e=>{async function t(r,n={type:"rsa",size:2048}){let s=await(await e.post("key/gen",{signal:n.signal,searchParams:u({arg:r,...n}),headers:n.headers})).json();return A(s)}return t});var $l=c(e=>{async function t(r,n,o,s={}){let a=await(await e.post("key/import",{signal:s.signal,searchParams:u({arg:r,pem:n,password:o,...s}),headers:s.headers})).json();return A(a)}return t});var Fl=E(ie(),1),jl=c(e=>async(r,n={})=>{throw(0,Fl.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")});var zl=c(e=>{async function t(r={}){return((await(await e.post("key/list",{signal:r.signal,searchParams:u(r),headers:r.headers})).json()).Keys||[]).map(s=>A(s))}return t});var Ml=c(e=>{async function t(r,n,o={}){let s=await e.post("key/rename",{signal:o.signal,searchParams:u({arg:[r,n],...o}),headers:o.headers});return A(await s.json())}return t});var ql=c(e=>{async function t(r,n={}){let s=await(await e.post("key/rm",{signal:n.signal,searchParams:u({arg:r,...n}),headers:n.headers})).json();return A(s.Keys[0])}return t});function Hl(e){return{export:Rl(e),gen:Ll(e),import:$l(e),info:jl(e),list:zl(e),rename:Ml(e),rm:ql(e)}}var Vl=c(e=>{async function t(r,n,o={}){let s=await e.post("log/level",{signal:o.signal,searchParams:u({arg:[r,n],...o}),headers:o.headers});return A(await s.json())}return t});var Gl=c(e=>{async function t(r={}){return(await(await e.post("log/ls",{signal:r.signal,searchParams:u(r),headers:r.headers})).json()).Strings}return t});var Wl=c(e=>{async function*t(r={}){yield*(await e.post("log/tail",{signal:r.signal,searchParams:u(r),headers:r.headers})).ndjson()}return t});function Jl(e){return{level:Vl(e),ls:Gl(e),tail:Wl(e)}}var Kl=c(e=>{async function t(r,n={}){let o=await e.post("name/publish",{signal:n.signal,searchParams:u({arg:`${r}`,...n}),headers:n.headers});return A(await o.json())}return t});var Xl=c(e=>{async function*t(r,n={}){let o=await e.post("name/resolve",{signal:n.signal,searchParams:u({arg:r,stream:!0,...n}),headers:n.headers});for await(let s of o.ndjson())yield s.Path}return t});var Ql=c(e=>{async function t(r,n={}){let o=await e.post("name/pubsub/cancel",{signal:n.signal,searchParams:u({arg:r,...n}),headers:n.headers});return A(await o.json())}return t});var Zl=c(e=>{async function t(r={}){let n=await e.post("name/pubsub/state",{signal:r.signal,searchParams:u(r),headers:r.headers});return A(await n.json())}return t});var Yl=c(e=>{async function t(r={}){return(await(await e.post("name/pubsub/subs",{signal:r.signal,searchParams:u(r),headers:r.headers})).json()).Strings||[]}return t});function ep(e){return{cancel:Ql(e),state:Zl(e),subs:Yl(e)}}function tp(e){return{publish:Kl(e),resolve:Xl(e),pubsub:ep(e)}}C();var rp=c(e=>{async function t(r,n={}){let s=await(await e.post("object/data",{signal:n.signal,searchParams:u({arg:`${r instanceof Uint8Array?m.decode(r):r}`,...n}),headers:n.headers})).arrayBuffer();return new Uint8Array(s,0,s.byteLength)}return t});C();Ct();var np=c(e=>{async function t(r,n={}){let s=await(await e.post("object/get",{signal:n.signal,searchParams:u({arg:`${r instanceof Uint8Array?m.decode(r):r}`,dataEncoding:"base64",...n}),headers:n.headers})).json();return{Data:Ne(s.Data,"base64pad"),Links:(s.Links||[]).map(i=>({Name:i.Name,Hash:m.parse(i.Hash),Tsize:i.Size}))}}return t});C();var op=c(e=>{async function t(r,n={}){return((await(await e.post("object/links",{signal:n.signal,searchParams:u({arg:`${r instanceof Uint8Array?m.decode(r):r}`,...n}),headers:n.headers})).json()).Links||[]).map(i=>({Name:i.Name,Tsize:i.Size,Hash:m.parse(i.Hash)}))}return t});C();var sp=c(e=>{async function t(r={}){let n=await e.post("object/new",{signal:r.signal,searchParams:u({arg:r.template,...r}),headers:r.headers}),{Hash:o}=await n.json();return m.parse(o)}return t});var ip=(e,t)=>c(n=>{let o=Dn(e,t);async function s(i,a={}){return o(i,{...a,storeCodec:"dag-pb",hashAlg:"sha2-256",version:1})}return s})(t);C();var ap=c(e=>{async function t(r,n={}){let s=await(await e.post("object/stat",{signal:n.signal,searchParams:u({arg:`${r}`,...n}),headers:n.headers})).json();return{...s,Hash:m.parse(s.Hash)}}return t});C();var cp=c(e=>{async function t(r,n,o={}){let s=await e.post("object/patch/add-link",{signal:o.signal,searchParams:u({arg:[`${r}`,n.Name||n.name||"",(n.Hash||n.cid||"").toString()||null],...o}),headers:o.headers}),{Hash:i}=await s.json();return m.parse(i)}return t});C();var up=c(e=>{async function t(r,n,o={}){let s=new AbortController,i=j(s.signal,o.signal),a=await e.post("object/patch/append-data",{signal:i,searchParams:u({arg:`${r}`,...o}),...await F([n],s,o.headers)}),{Hash:l}=await a.json();return m.parse(l)}return t});C();var fp=c(e=>{async function t(r,n,o={}){let s=await e.post("object/patch/rm-link",{signal:o.signal,searchParams:u({arg:[`${r}`,n.Name||n.name||null],...o}),headers:o.headers}),{Hash:i}=await s.json();return m.parse(i)}return t});C();var lp=c(e=>{async function t(r,n,o={}){let s=new AbortController,i=j(s.signal,o.signal),a=await e.post("object/patch/set-data",{signal:i,searchParams:u({arg:[`${r}`],...o}),...await F([n],s,o.headers)}),{Hash:l}=await a.json();return m.parse(l)}return t});function pp(e){return{addLink:cp(e),appendData:up(e),rmLink:fp(e),setData:lp(e)}}function dp(e,t){return{data:rp(t),get:np(t),links:op(t),new:sp(t),put:ip(e,t),stat:ap(t),patch:pp(t)}}C();var Ot=E(ie(),1);C();async function*xn(e){if(e==null)throw(0,Ot.default)(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");let t=m.asCID(e);if(t){yield Te({cid:t});return}if(e instanceof String||typeof e=="string"){yield Te({path:e});return}if(e.cid!=null||e.path!=null)return yield Te(e);if(Symbol.iterator in e){let r=e[Symbol.iterator](),n=r.next();if(n.done)return r;if(m.asCID(n.value)||n.value instanceof String||typeof n.value=="string"){yield Te({cid:n.value});for(let o of r)yield Te({cid:o});return}if(n.value.cid!=null||n.value.path!=null){yield Te(n.value);for(let o of r)yield Te(o);return}throw(0,Ot.default)(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}if(Symbol.asyncIterator in e){let r=e[Symbol.asyncIterator](),n=await r.next();if(n.done)return r;if(m.asCID(n.value)||n.value instanceof String||typeof n.value=="string"){yield Te({cid:n.value});for await(let o of r)yield Te({cid:o});return}if(n.value.cid!=null||n.value.path!=null){yield Te(n.value);for await(let o of r)yield Te(o);return}throw(0,Ot.default)(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}throw(0,Ot.default)(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}function Te(e){let t=e.cid||`${e.path}`;if(!t)throw(0,Ot.default)(new Error("Unexpected input: Please path either a CID or an IPFS path"),"ERR_UNEXPECTED_INPUT");let r={path:t,recursive:e.recursive!==!1};return e.metadata!=null&&(r.metadata=e.metadata),r}var Sn=c(e=>{async function*t(r,n={}){for await(let{path:o,recursive:s,metadata:i}of xn(r)){let a=await e.post("pin/add",{signal:n.signal,searchParams:u({...n,arg:o,recursive:s,metadata:i?JSON.stringify(i):void 0,stream:!0}),headers:n.headers});for await(let l of a.ndjson()){if(l.Pins){for(let h of l.Pins)yield m.parse(h);continue}yield m.parse(l)}}}return t});var mp=E(dr(),1);function hp(e){let t=Sn(e);return c(()=>{async function r(n,o={}){return(0,mp.default)(t([{path:n,...o}],o))}return r})(e)}C();function yp(e,t,r){let n={type:e,cid:m.parse(t)};return r&&(n.metadata=r),n}var gp=c(e=>{async function*t(r={}){let n=[];r.paths&&(n=Array.isArray(r.paths)?r.paths:[r.paths]);let o=await e.post("pin/ls",{signal:r.signal,searchParams:u({...r,arg:n.map(s=>`${s}`),stream:!0}),headers:r.headers});for await(let s of o.ndjson()){if(s.Keys){for(let i of Object.keys(s.Keys))yield yp(s.Keys[i].Type,i,s.Keys[i].Metadata);return}yield yp(s.Type,s.Cid,s.Metadata)}}return t});C();var Cn=c(e=>{async function*t(r,n={}){for await(let{path:o,recursive:s}of xn(r)){let i=new URLSearchParams(n.searchParams);i.append("arg",`${o}`),s!=null&&i.set("recursive",String(s));let a=await e.post("pin/rm",{signal:n.signal,headers:n.headers,searchParams:u({...n,arg:`${o}`,recursive:s})});for await(let l of a.ndjson()){if(l.Pins){yield*l.Pins.map(h=>m.parse(h));continue}yield m.parse(l)}}}return t});var wp=E(dr(),1);var bp=e=>{let t=Cn(e);return c(()=>{async function r(n,o={}){return(0,wp.default)(t([{path:n,...o}],o))}return r})(e)};C();var Tn=({Name:e,Status:t,Cid:r})=>({cid:m.parse(r),name:e,status:t}),Dp=e=>{if(typeof e=="string"&&e!=="")return e;throw new TypeError("service name must be passed")},Ep=e=>{if(m.asCID(e))return e.toString();throw new TypeError(`CID instance expected instead of ${typeof e}`)},Rt=({service:e,cid:t,name:r,status:n,all:o})=>{let s=u({service:Dp(e),name:r,force:o?!0:void 0});if(t)for(let i of t)s.append("cid",Ep(i));if(n)for(let i of n)s.append("status",i);return s},xp=({cid:e,service:t,background:r,name:n,origins:o})=>{let s=u({arg:Ep(e),service:Dp(t),name:n,background:r?!0:void 0});if(o)for(let i of o)s.append("origin",i.toString());return s};function Sp(e){async function t(r,{timeout:n,signal:o,headers:s,...i}){let a=await e.post("pin/remote/add",{timeout:n,signal:o,headers:s,searchParams:xp({cid:r,...i})});return Tn(await a.json())}return t}function Cp(e){async function*t({timeout:r,signal:n,headers:o,...s}){let i=await e.post("pin/remote/ls",{timeout:r,signal:n,headers:o,searchParams:Rt(s)});for await(let a of i.ndjson())yield Tn(a)}return t}function Tp(e){async function t({timeout:r,signal:n,headers:o,...s}){await e.post("pin/remote/rm",{timeout:r,signal:n,headers:o,searchParams:Rt({...s,all:!1})})}return t}function Pp(e){async function t({timeout:r,signal:n,headers:o,...s}){await e.post("pin/remote/rm",{timeout:r,signal:n,headers:o,searchParams:Rt({...s,all:!0})})}return t}function Ap(e){let t=String(e);if(t==="undefined")throw Error("endpoint is required");return t[t.length-1]==="/"?t.slice(0,-1):t}function vp(e){return{service:e.Service,endpoint:new URL(e.ApiEndpoint),...e.Stat&&{stat:Yw(e.Stat)}}}function Yw(e){switch(e.Status){case"valid":{let{Pinning:t,Pinned:r,Queued:n,Failed:o}=e.PinCount;return{status:"valid",pinCount:{queued:n,pinning:t,pinned:r,failed:o}}}case"invalid":return{status:"invalid"};default:return{status:e.Status}}}function Bp(e){async function t(r,n){let{endpoint:o,key:s,headers:i,timeout:a,signal:l}=n;await e.post("pin/remote/service/add",{timeout:a,signal:l,searchParams:u({arg:[r,Ap(o),s]}),headers:i})}return t}function Up(e){async function t(r={}){let{stat:n,headers:o,timeout:s,signal:i}=r,a=await e.post("pin/remote/service/ls",{timeout:s,signal:i,headers:o,searchParams:n===!0?u({stat:n}):void 0}),{RemoteServices:l}=await a.json();return l.map(vp)}return t}function kp(e){async function t(r,n={}){await e.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:u({arg:r})})}return t}function Ip(e){let t=new Ve(e);return{add:Bp(t),ls:Up(t),rm:kp(t)}}function _p(e){let t=new Ve(e);return{add:Sp(t),ls:Cp(t),rm:Tp(t),rmAll:Pp(t),service:Ip(e)}}function Np(e){return{addAll:Sn(e),add:hp(e),ls:gp(e),rmAll:Cn(e),rm:bp(e),remote:_p(e)}}Ct();He();Zt();var Pn=e=>Array.isArray(e)?e.map(eb):e,eb=e=>et(An(e)),An=e=>Mr.decode(e),Lt=e=>Mr.encode(Ne(e));var Op=c(e=>{async function t(r={}){let{Strings:n}=await(await e.post("pubsub/ls",{signal:r.signal,searchParams:u(r),headers:r.headers})).json();return Pn(n)||[]}return t});var Rp=c(e=>{async function t(r,n={}){let o=await e.post("pubsub/peers",{signal:n.signal,searchParams:u({arg:Lt(r),...n}),headers:n.headers}),{Strings:s}=await o.json();return s||[]}return t});var Lp=c(e=>{async function t(r,n,o={}){let s=u({arg:Lt(r),...o}),i=new AbortController,a=j(i.signal,o.signal);await(await e.post("pubsub/pub",{signal:a,searchParams:s,...await F([n],i,o.headers)})).text()}return t});var $p=E(ns(),1);var tb=(0,$p.default)("ipfs-http-client:pubsub:subscribe"),Fp=(e,t)=>c(r=>{async function n(o,s,i={}){i.signal=t.subscribe(o,s,i.signal);let a,l,h=new Promise((y,P)=>{a=y,l=P}),d=setTimeout(()=>a(),1e3);return r.post("pubsub/sub",{signal:i.signal,searchParams:u({arg:Lt(o),...i}),headers:i.headers}).catch(y=>{t.unsubscribe(o,s),l(y)}).then(y=>{clearTimeout(d),y&&(rb(y,{onMessage:s,onEnd:()=>t.unsubscribe(o,s),onError:i.onError}),a())}),h}return n})(e);async function rb(e,{onMessage:t,onEnd:r,onError:n}){n=n||tb;try{for await(let o of e.ndjson())try{if(!o.from)continue;t({from:o.from,data:An(o.data),seqno:An(o.seqno),topicIDs:Pn(o.topicIDs)})}catch(s){s.message=`Failed to parse pubsub message: ${s.message}`,n(s,!1,o)}}catch(o){nb(o)||n(o,!0)}finally{r()}}var nb=e=>{switch(e.type){case"aborted":return!0;case"abort":return!0;default:return e.name==="AbortError"}};var jp=(e,t)=>{async function r(n,o){t.unsubscribe(n,o)}return r};var vn=class{constructor(){this._subs=new Map}subscribe(t,r,n){let o=this._subs.get(t)||[];if(o.find(i=>i.handler===r))throw new Error(`Already subscribed to ${t} with this handler`);let s=new AbortController;return this._subs.set(t,[{handler:r,controller:s}].concat(o)),n&&n.addEventListener("abort",()=>this.unsubscribe(t,r)),s.signal}unsubscribe(t,r){let n=this._subs.get(t)||[],o;r?(this._subs.set(t,n.filter(s=>s.handler!==r)),o=n.filter(s=>s.handler===r)):(this._subs.set(t,[]),o=n),(this._subs.get(t)||[]).length||this._subs.delete(t),o.forEach(s=>s.controller.abort())}};function zp(e){let t=new vn;return{ls:Op(e),peers:Rp(e),publish:Lp(e),subscribe:Fp(e,t),unsubscribe:jp(e,t)}}C();var Mp=c(e=>{async function*t(r={}){yield*(await e.post("refs/local",{signal:r.signal,transform:A,searchParams:u(r),headers:r.headers})).ndjson()}return t});var qp=c((e,t)=>Object.assign(async function*(n,o={}){let s=Array.isArray(n)?n:[n];yield*(await e.post("refs",{signal:o.signal,searchParams:u({arg:s.map(a=>`${a instanceof Uint8Array?m.decode(a):a}`),...o}),headers:o.headers,transform:A})).ndjson()},{local:Mp(t)}));C();var Hp=c(e=>{async function*t(r={}){yield*(await e.post("repo/gc",{signal:r.signal,searchParams:u(r),headers:r.headers,transform:o=>({err:o.Error?new Error(o.Error):null,cid:(o.Key||{})["/"]?m.parse(o.Key["/"]):null})})).ndjson()}return t});var Bn=c(e=>{async function t(r={}){let o=await(await e.post("repo/stat",{signal:r.signal,searchParams:u(r),headers:r.headers})).json();return{numObjects:BigInt(o.NumObjects),repoSize:BigInt(o.RepoSize),repoPath:o.RepoPath,version:o.Version,storageMax:BigInt(o.StorageMax)}}return t});var Vp=c(e=>{async function t(r={}){return(await(await e.post("repo/version",{signal:r.signal,searchParams:u(r),headers:r.headers})).json()).Version}return t});function Gp(e){return{gc:Hp(e),stat:Bn(e),version:Vp(e)}}var Wp=c(e=>{async function*t(r={}){yield*(await e.post("stats/bw",{signal:r.signal,searchParams:u(r),headers:r.headers,transform:o=>({totalIn:BigInt(o.TotalIn),totalOut:BigInt(o.TotalOut),rateIn:parseFloat(o.RateIn),rateOut:parseFloat(o.RateOut)})})).ndjson()}return t});function Jp(e){return{bitswap:pn(e),repo:Bn(e),bw:Wp(e)}}var Kp=E(Q(),1);var Xp=c(e=>{async function t(r={}){let n=await e.post("swarm/addrs",{signal:r.signal,searchParams:u(r),headers:r.headers}),{Addrs:o}=await n.json();return Object.keys(o).map(s=>({id:s,addrs:(o[s]||[]).map(i=>new Kp.Multiaddr(i))}))}return t});var Qp=c(e=>{async function t(r,n={}){let o=await e.post("swarm/connect",{signal:n.signal,searchParams:u({arg:r,...n}),headers:n.headers}),{Strings:s}=await o.json();return s||[]}return t});var Zp=c(e=>{async function t(r,n={}){let o=await e.post("swarm/disconnect",{signal:n.signal,searchParams:u({arg:r,...n}),headers:n.headers}),{Strings:s}=await o.json();return s||[]}return t});var Yp=E(Q(),1);var ed=c(e=>{async function t(r={}){let n=await e.post("swarm/addrs/local",{signal:r.signal,searchParams:u(r),headers:r.headers}),{Strings:o}=await n.json();return(o||[]).map(s=>new Yp.Multiaddr(s))}return t});var td=E(Q(),1);var rd=c(e=>{async function t(r={}){let n=await e.post("swarm/peers",{signal:r.signal,searchParams:u(r),headers:r.headers}),{Peers:o}=await n.json();return(o||[]).map(s=>({addr:new td.Multiaddr(s.Addr),peer:s.Peer,muxer:s.Muxer,latency:s.Latency,streams:s.Streams,direction:s.Direction==null?void 0:s.Direction===0?"inbound":"outbound"}))}return t});function nd(e){return{addrs:Xp(e),connect:Qp(e),disconnect:Zp(e),localAddrs:ed(e),peers:rd(e)}}C();var Un=c(e=>{async function*t(r,n={}){let o=new AbortController,s=j(o.signal,n.signal),{headers:i,body:a,total:l,parts:h}=await F(r,o,n.headers),[d,y]=typeof n.progress=="function"?ob(l,h,n.progress):[void 0,void 0],P=await e.post("add",{searchParams:u({"stream-channels":!0,...n,progress:!!d}),onUploadProgress:y,signal:s,headers:i,body:a});for await(let N of P.ndjson())N=A(N),N.hash!==void 0?yield ib(N):d&&d(N.bytes||0,N.name)}return t}),ob=(e,t,r)=>t?[void 0,sb(e,t,r)]:[r,void 0],sb=(e,t,r)=>{let n=0,o=t.length;return({loaded:s,total:i})=>{let a=Math.floor(s/i*e);for(;n<o;){let{start:l,end:h,name:d}=t[n];if(a<h){r(a-l,d);break}else r(h-l,d),n+=1}}};function ib({name:e,hash:t,size:r,mode:n,mtime:o,mtimeNsecs:s}){let i={path:e,cid:m.parse(t),size:parseInt(r)};return n!=null&&(i.mode=parseInt(n,8)),o!=null&&(i.mtime={secs:o,nsecs:s||0}),i}var cd=E(dr(),1);var In=E(ie(),1),od=E(ar(),1),sd=E(mn(),1);async function*id(e,t){if(e==null)throw(0,In.default)(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");if(typeof e=="string"||e instanceof String){yield kn(e.toString(),t);return}if(Oe(e)||ot(e)){yield kn(e,t);return}if(st(e)&&(e=(0,od.default)(e)),Symbol.iterator in e||Symbol.asyncIterator in e){let r=(0,sd.default)(e),{value:n,done:o}=await r.peek();if(o){yield{content:[]};return}if(r.push(n),Number.isInteger(n)||Oe(n)||typeof n=="string"||n instanceof String){yield kn(r,t);return}throw(0,In.default)(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(cr(e)){yield kn(e,t);return}throw(0,In.default)(new Error('Unexpected input: cannot convert "'+typeof e+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function kn(e,t){let{path:r,mode:n,mtime:o,content:s}=e,i={path:r||"",mode:wn(n),mtime:bn(o)};return s?i.content=await t(s):r||(i.content=await t(e)),i}function ad(e){return id(e,hn)}function ud(e){let t=Un(e);return c(()=>{async function r(n,o={}){return await(0,cd.default)(t(ad(n),o))}return r})(e)}var fd=c(e=>{async function*t(r,n={}){yield*(await e.post("cat",{signal:n.signal,searchParams:u({arg:r.toString(),...n}),headers:n.headers})).iterator()}return t});var ld=c(e=>async(r={})=>(await e.post("commands",{signal:r.signal,searchParams:u(r),headers:r.headers})).json());var pd=c(e=>async(r,n={})=>(await(await e.post("dns",{signal:n.signal,searchParams:u({arg:r,...n}),headers:n.headers})).json()).Path);var dd=c(e=>()=>{let t=new URL(e.opts.base||"");return{host:t.hostname,port:t.port,protocol:t.protocol,pathname:t.pathname,"api-path":t.pathname}});C();var md=c(e=>{async function*t(r,n={}){let o={arg:`${r instanceof Uint8Array?m.decode(r):r}`,...n};o.compressionLevel&&(o["compression-level"]=o.compressionLevel,delete o.compressionLevel),yield*(await e.post("get",{signal:n.signal,searchParams:u(o),headers:n.headers})).iterator()}return t});var hd=E(Q(),1);var _n=c(e=>{async function t(r={}){let o=await(await e.post("id",{signal:r.signal,searchParams:u({arg:r.peerId?r.peerId.toString():void 0,...r}),headers:r.headers})).json(),s={...A(o)};return s.addresses&&(s.addresses=s.addresses.map(i=>new hd.Multiaddr(i))),s}return t});var yd=e=>{let t=_n(e);async function r(n={}){let o=await t(n);return!!(o&&o.addresses&&o.addresses.length)}return r};C();var gd=c((e,t)=>{async function*r(n,o={}){let s=`${n instanceof Uint8Array?m.decode(n):n}`;async function i(l){let h=l.Hash;if(h.includes("/")){let y=h.startsWith("/ipfs/")?h:`/ipfs/${h}`;h=(await En(t)(y)).cid}else h=m.parse(h);let d={name:l.Name,path:s+(l.Name?`/${l.Name}`:""),size:l.Size,cid:h,type:ab(l)};return l.Mode&&(d.mode=parseInt(l.Mode,8)),l.Mtime!==void 0&&l.Mtime!==null&&(d.mtime={secs:l.Mtime},l.MtimeNsecs!==void 0&&l.MtimeNsecs!==null&&(d.mtime.nsecs=l.MtimeNsecs)),d}let a=await e.post("ls",{signal:o.signal,searchParams:u({arg:s,...o}),headers:o.headers});for await(let l of a.ndjson()){if(l=l.Objects,!l)throw new Error("expected .Objects in results");if(l=l[0],!l)throw new Error("expected one array in results.Objects");let h=l.Links;if(!Array.isArray(h))throw new Error("expected one array in results.Objects[0].Links");if(!h.length){yield i(l);return}yield*h.map(i)}}return r});function ab(e){switch(e.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}var wd=c(e=>{async function t(r={}){let n=await e.post("dns",{signal:r.signal,searchParams:u(r),headers:r.headers});return A(await n.json())}return t});var bd=c(e=>{async function*t(r,n={}){yield*(await e.post("ping",{signal:n.signal,searchParams:u({arg:`${r}`,...n}),headers:n.headers,transform:A})).ndjson()}return t});var Dd=c(e=>{async function t(r,n={}){let o=await e.post("resolve",{signal:n.signal,searchParams:u({arg:r,...n}),headers:n.headers}),{Path:s}=await o.json();return s}return t});var Ed=E(ie(),1),xd=c(e=>async(r={})=>{throw(0,Ed.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")});var Sd=c(e=>{async function t(r={}){await(await e.post("shutdown",{signal:r.signal,searchParams:u(r),headers:r.headers})).text()}return t});var Cd=c(e=>{async function t(r={}){let n=await e.post("version",{signal:r.signal,searchParams:u(r),headers:r.headers});return{...A(await n.json()),"ipfs-http-client":"1.0.0"}}return t});var vd=E(Td(),1);C();var pb=E(Q(),1),db=E(Ad(),1);function wA(e={}){let t={name:Hr.name,code:Hr.code,encode:h=>h,decode:h=>h},r=Object.values(Yt);(e.ipld&&e.ipld.bases?e.ipld.bases:[]).forEach(h=>r.push(h));let n=new yr({bases:r,loadBase:e.ipld&&e.ipld.loadBase}),o=Object.values(Ga);[Gn,fo,Eo,lb,t].concat(e.ipld&&e.ipld.codecs||[]).forEach(h=>o.push(h));let s=new gr({codecs:o,loadCodec:e.ipld&&e.ipld.loadCodec}),i=Object.values(Va);(e.ipld&&e.ipld.hashers?e.ipld.hashers:[]).forEach(h=>i.push(h));let a=new wr({hashers:i,loadHasher:e.ipld&&e.ipld.loadHasher});return{add:ud(e),addAll:Un(e),bitswap:Nu(e),block:kf(e),bootstrap:Mf(e),cat:fd(e),commands:ld(e),config:Xf(e),dag:al(s,e),dht:ml(e),diag:wl(e),dns:pd(e),files:Nl(e),get:md(e),getEndpointConfig:dd(e),id:_n(e),isOnline:yd(e),key:Hl(e),log:Jl(e),ls:gd(e),mount:wd(e),name:tp(e),object:dp(s,e),pin:Np(e),ping:bd(e),pubsub:zp(e),refs:qp(e),repo:Gp(e),resolve:Dd(e),start:xd(e),stats:Jp(e),stop:Sd(e),swarm:nd(e),version:Cd(e),bases:n,codecs:s,hashers:a}}var bA=vd.default;var export_multiaddr=pb.Multiaddr;var export_urlSource=db.default;export{m as CID,wA as create,bA as globSource,export_multiaddr as multiaddr,export_urlSource as urlSource};
//# sourceMappingURL=src-AP3JEO4F.js.map
